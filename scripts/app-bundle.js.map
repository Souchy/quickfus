{"version":3,"sources":["../src/api.ts","../src/app.ts","../src/app.less","../src/app.html","../src/components/footer.ts","../src/components/footer.css","../src/components/footer.html","../src/components/header.ts","../src/components/header.css","../src/components/header.html","../src/components/mason.css","../src/components/statmod.ts","../src/components/statmod.html","../src/db.ts","../src/environment.ts","../src/i18n.ts","../src/main.ts","../src/pages/build/build.ts","../src/pages/build/build.html","../src/pages/build/components/itemSlot.ts","../src/pages/build/components/itemSlot.css","../src/pages/build/components/itemSlot.html","../src/pages/build/components/items.ts","../src/pages/build/components/items.html","../src/pages/build/components/options.ts","../src/pages/build/components/options.css","../src/pages/build/components/options.html","../src/pages/build/components/sets.ts","../src/pages/build/components/sets.html","../src/pages/build/components/spells.ts","../src/pages/build/components/spells.html","../src/pages/build/components/stats/addedstats.ts","../src/pages/build/components/stats/addedstats.html","../src/pages/build/components/stats/basestats.ts","../src/pages/build/components/stats/basestats.html","../src/pages/build/components/stats/combatstats.ts","../src/pages/build/components/stats/combatstats.css","../src/pages/build/components/stats/combatstats.html","../src/pages/build/components/stats/totalstats.ts","../src/pages/build/components/stats/totalstats.css","../src/pages/build/components/stats/totalstats.html","../src/pages/build/components/weapon.ts","../src/pages/build/components/weapon.html","../src/pages/builds/builds.ts","../src/pages/builds/builds.css","../src/pages/builds/builds.html","../src/pages/items/filter.ts","../src/pages/items/filter.less","../src/pages/items/filter.html","../src/pages/items/itemsearch.ts","../src/pages/items/itemsearch.css","../src/pages/items/itemsearch.html","../src/pages/items/itemsheet.ts","../src/pages/items/itemsheet.css","../src/pages/items/itemsheet.html","../src/pages/sets/setfilter.ts","../src/pages/sets/setfilter.less","../src/pages/sets/setfilter.html","../src/pages/sets/setsearch.ts","../src/pages/sets/setsearch.css","../src/pages/sets/setsearch.html","../src/pages/sets/setsheet.ts","../src/pages/sets/setsheet.less","../src/pages/sets/setsheet.html","../src/resources/index.ts","../src/util.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { HttpClient, HttpRequestMessage, HttpResponseMessage, RequestTransformer } from 'aurelia-http-client';\nimport { HttpClient as FetchClient } from 'aurelia-fetch-client';\nimport { App } from 'app';\nimport { MongoClient } from 'mongodb';\n\nexport class WebAPI {\n\n\tprivate static local = false;\n\tpublic client: HttpClient = new HttpClient();\n\n\tpublic getUrl() {\n\t\t// console.log(\"url : \" + location.hostname);\n\t\treturn \"https://data.mongodb-api.com/app/data-ewvjc/endpoint/data/v1\"; // return \"http://\" + location.hostname + \":9696\";\n\t}\n\n  public findOne(collection: string, id: string): Promise<HttpResponseMessage> {\n\t\tvar url = this.getUrl() + \"/findOne\";\n\t\tvar body: string = JSON.stringify({\n      \"dataSource\": \"SouchyAtlasCluster0\",\n      \"database\": \"quickfus\",\n      \"collection\": collection,\n      \"filter\": { \"_id\": id }\n    });\n\t\tvar req = new HttpRequestMessage(\"POST\", url, body);\n    req.headers.add(\"api-key\", \"k8JFpRr9LxAWCSsekfSR2j9aLlbj5kaK3oz3vB33tyx1BgxAG7LtRxx9nw4mdJWI\")\n\t\treturn this.client.send(req, []);\n  }\n\n  public aggregate(collection: string, pipeline: any[]): Promise<HttpResponseMessage> {\n\t\tvar url = this.getUrl() + \"/aggregate\";\n\t\tvar body: string = JSON.stringify({\n      \"dataSource\": \"SouchyAtlasCluster0\",\n      \"database\": \"quickfus\",\n      \"collection\": collection,\n      \"pipeline\": pipeline\n    });\n\t\tvar req = new HttpRequestMessage(\"POST\", url, body);\n    req.headers.add(\"api-key\", \"k8JFpRr9LxAWCSsekfSR2j9aLlbj5kaK3oz3vB33tyx1BgxAG7LtRxx9nw4mdJWI\")\n\t\treturn this.client.send(req, []);\n  }\n\n\tpublic getSet(id): Promise<HttpResponseMessage> {\n\t\treturn this.findOne(\"sets\", id);\n\t}\n\n\tpublic getItem(id): Promise<HttpResponseMessage> {\n\t\treturn this.findOne(\"items\", id);\n\t}\n\n\tpublic findItems(itemfilters): Promise<HttpResponseMessage> {\n\t\treturn null;\n\t}\n\n\tpublic getItems(pipeline: any[]): Promise<HttpResponseMessage> {\n    return this.aggregate(\"items\", pipeline);\n\t}\n\n\tpublic getSets(pipeline: any[]): Promise<HttpResponseMessage> {\n    return this.aggregate(\"sets\", pipeline);\n\t}\n\n\tpublic hash(password: string, salt: any) {\n\t\treturn password;\n\t}\n\n\n}\n","\nimport { Router, RouterConfiguration, RouteConfig, NavigationInstruction, Next } from 'aurelia-router';\n// import { PLATFORM } from 'aurelia-pal';\nimport { inject, PLATFORM } from 'aurelia-framework';\nimport { WebAPI } from './api';\nimport { db } from './db';\n\n\n@inject(WebAPI)\nexport class App {\n\tpublic router: Router;\n\tpublic body: string = \"\";\n\n\tpublic constructor(private api: WebAPI) {\n\t\tconsole.log(\"app ctor\");\n\t\tdb.init(true);\n\t}\n\n\tpublic configureRouter(config: RouterConfiguration, router: Router) {\n\t\tconsole.log(\"configure router\");\n\t\tconfig.title = 'Quickfus';\n\t\tconfig.options.pushState = true;\n\t\tconfig.options.root = '/quickfus';\n\t\tconfig.addPipelineStep('postcomplete', PostCompleteStep);\n\t\tconfig.map([\n\t\t\t// { route: '', moduleId: PLATFORM.moduleName('no-selection'), title: 'Select' },\n\t\t\t// { route: 'contacts/:id', moduleId: PLATFORM.moduleName('contact-detail'), name: 'contacts' },\n\n\t\t\t// { route: '', moduleId: PLATFORM.moduleName('auth'), name: 'auth' }\n\t\t\t// { route: 'unknownroute', moduleId: \"\", name: 'unknownroute' },\n\t\t\t// { route: 'auth', moduleId: \"pages/auth/auth\", name: 'auth' },\n\n\t\t\t{ route: '', moduleId: \"pages/build/build\", name: 'index' },\n\t\t\t{ route: 'build', moduleId: \"pages/build/build\", name: 'build' },\n\t\t\t// { route: 'build/:data', moduleId: \"pages/build/build\", name: 'buildimport' },\n\t\t\t{ route: 'builds', moduleId: \"pages/builds/builds\", name: 'builds' },\n\t\t\t{ route: 'items', moduleId: \"pages/items/itemsearch\", name: 'items' },\n\t\t\t{ route: 'sets', moduleId: \"pages/sets/setsearch\", name: 'sets' }\n\t\t]);\n\t\tconfig.mapUnknownRoutes((instruction: NavigationInstruction): RouteConfig => {\n\t\t\treturn { route: 'unknownroute', name: 'unknownroute' };\n\t\t}); //'not-found');\n\n\t\tthis.router = router;\n\t}\n\n}\n\n\nclass PostCompleteStep {\n\trun(instruction: NavigationInstruction, next: Next) {\n\t\tif (!instruction.config.settings.noScrollToTop) {\n\t\t\twindow.scrollTo(0, 0);\n\t\t}\n\t\treturn next();\n\t}\n}\n","/*\nbody {\n  background-color: #3d3d3d;\n  color: white;\n} */\n:root {\n  /* --bg0: #212121; */\n  --bg0: #121212; /* level 0 dark */\n  --bg1: #212121; /* level 1 dark */\n  --front0: rgba(255, 255, 255, 0.87); /* #bdbdbd; /* text on background */\n  --front1: black; /* text on accent */\n  --accent0: #BB86FC; /* purple */\n  --accent1: #03DAC5; /* teal */\n  --accent2: darkred; /* #CF6679; /* red error */\n  --accent1a: rgba(3, 218, 197, 0.5); /* teal with alpha */\n  --shadow: black;\n\n  --surface: #FFFFFF;\n  --onsurface: #121212;\n  --primarysurface: #3700B3;\n}\n\nbody {\n  /* background-image: url(\"/src/res/Tex_krakken.PNG\"); */\n  background-color: var(--bg0) !important;\n  color: var(--front0) !important;\n}\n\n#page-container {\n  position: relative;\n  min-height: 100vh;\n}\n#content-wrap {\n  padding-bottom: 2.5rem;    /* Footer height */\n}\n\n.sheet {\n  background: var(--bg1);\n  color: var(--front0);\n}\n.sheettip {\n  background: var(--bg1);\n  color: var(--front0);\n  opacity: 0.7;\n}\n.surface {\n  background: var(--surface);\n  color: var(--onsurface);\n}\n\n\n/* button */\n/* this button is accent>transparent and turns black>accent on hover */\n.btn0 {\n  color: var(--accent1);\n  background: var(--bg0);\n  border: 1px solid transparent;\n}\n.btn0:hover {\n  color: var(--front1);\n  background: var(--accent1);\n  border-color: var(--accent1);\n}\n/* this button is white>gray with an accent border */\n.btn1 {\n  color: var(--front0);\n  background: var(--bg1);\n  border: 1px solid var(--accent1);\n}\n.btnDelete {\n  color: var(--accent1);\n  background: var(--bg0);\n  border: 1px solid transparent;\n  width: 38px;\n  height: 30px;\n}\n.btnDelete:hover {\n  color: var(--front1);\n  background: var(--accent1);\n  border-color: var(--accent1);\n}\n.btnSearch {\n  color: var(--front0);\n  background: var(--bg1);\n  border: 1px solid var(--accent1);\n  width: 30%;\n  height: 40px;\n  margin: 0 auto;\n}\n.btnAdd {\n  color: var(--front0);\n  background: var(--bg1);\n  border: 1px solid var(--accent1);\n  margin: 0 auto;\n  width: 80%;\n  height: 40px;\n}\n\n/* Text input */\ninput[type=text] {\n  background: var(--bg1);\n  color: var(--front0);\n  border: 1px solid var(--accent1);\n}\n\n/* Number input */\ninput[type=number] {\n  width: 70px;\n  background: var(--bg1);\n  text-align: center;\n  color: var(--front0);\n  border: 1px solid var(--accent1);\n}\ninput[type=number]::-webkit-inner-spin-button,\ninput[type=number]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n","<template>\n  <require from=\"./app.less\"></require>\n  <require from=\"./components/header\"></require>\n  <require from=\"./components/footer\"></require>\n\n\n\n  <div id=\"page-container\">\n    <div id=\"content-wrap\">\n      <!-- header component -->\n      <header></header>\n      <!-- render the router view (aka whichever page selected by the url and routed by app.ts) -->\n      <router-view model.bind=\"data\"></router-view>\n    </div>\n    <!-- footer component -->\n    <footer></footer>\n  </div>\n\n</template>\n","export class footer {\n\n}\n","\n.socials {\n  /* position: absolute; */\n  bottom: 4%;\n  /* text-align: center; */\n  /* transform: translate(-50%, -50%); */\n  /* width: 100%; */\n\n  /* align-content:center; */\n}\n\na {\n  display: inline-block;\n  padding: 5px;\n  color: black;\n  /* text-decoration: none; */\n}\n\n\nfooter {\n   position: absolute;\n   left: 0;\n   bottom: 0;\n   width: 100%;\n   text-align: center;\n}\n","<template>\n  <require from=\"./footer.css\"></require>\n\n  <!-- <span class=\"socials\">\n    <a href=\"google.com\">Discord</a>\n    <a href=\"google.com\">Twitter</a>\n    <a href=\"google.com\">Reddit</a>\n  </span> -->\n\n  <span>\n    © 2020 Quickfus. Toutes les images sont la propriété d'Ankama.\n  </span>\n\n</template>\n","export class header {\n\n}\n","nav {\n  width: 100%;\n  height: 50px;\n  margin-bottom: 20px;\n  background-color: transparent;\n  border-bottom: 1px solid var(--accent1);\n  /* padding-left: 0px !important; */\n}\n\nnav li {\n  height: 50px;\n  padding-left: 10px;\n  padding-right: 10px;\n}\nnav li:hover {\n  color: var(--front1);\n  background-color: var(--accent1);\n  text-decoration: none;\n}\nnav li:hover a {\n  color: var(--front1);\n  background-color: var(--accent1);\n  text-decoration: none;\n}\n\nnav a {\n  height: 50px;\n  color: var(--accent1);\n  text-decoration: none;\n  padding: 12px !important;\n}\nnav a:visited {\ncolor: var(--accent1);\n  text-decoration: none;\n  background-color: #555;\n}\n","<template>\n  <require from=\"./header.css\"></require>\n\n  <nav class=\"navbar navbar-expand-lg\">\n\n    <ul class=\"navbar-nav mr-auto\">\n      <li class=\"nav-item\">\n        <a class=\"nav-link\" href=\"/builds\">Builds</a>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link\" href=\"/build\">Build</a>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link\" href=\"/items\">Items</a>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link\" href=\"/sets\">Sets</a>\n      </li>\n    </ul>\n\n    <ul class=\"navbar-nav\">\n      <li class=\"nav-item\">\n        <a href=\"https://twitter.com/quickfus\">\n          <i class=\"fab fa-twitter\"></i>\n        </a>\n      </li>\n      <li class=\"nav-item\">\n        <a href=\"https://github.com/Souchy/quickfus\">\n          <i class=\"fab fa-github\"></i>\n        </a>\n      </li>\n    </ul>\n\n  </nav>\n\n</template>\n","\n/* ---- grid ---- */\n.grid:after {\n  content: '';\n  display: block;\n  clear: both;\n}\n.grid-wrapper {\n  width: 100%;\n  height: 100%;\n  min-height: 1000px;\n}\n.grid {\n  margin: 0 auto;\n  /* min-width: 540;\n  min-height: 1000px; */\n}\n\n/* clearfix */\n /* .grid:after {\n  content: '';\n  display: block;\n  clear: both;\n} */\n\n/* ---- grid-item ---- */\n.grid-item {\n  float: left;\n  width: 260px;\n  /* min-height: 150px; */\n\n  /* padding: 5px; */\n  /* margin: 5px;  /* masonry does not respect left & right margins, so we need to use gutter : 10 instead */\n  margin-bottom: 10px; /* and to add a margin-bottom for vertical gutter (this is respected by masonry) */\n}\n","export class ModFilter {\n\tpublic name: string;\n\tpublic min: number;\n\tpublic max: number;\n\tpublic activate: boolean = true;\n\tpublic constructor() {\n\t}\n}\n\nexport class statmod {\n\n\tpublic name: string;\n\tpublic min: number;\n\tpublic max: number;\n\tpublic activate: boolean = true;\n\tpublic boxCount: number = 2; // if 1 or 2 number inputs. (exo stat or min/max setting)\n\n\n\tpublic modsref: statmod[];\n\n\tpublic constructor() {\n\n\t}\n\n\tpublic onModInputFocus(that, event, blockid, modid) {\n\t\t// console.log(\"onFocusModInput [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\t$(event.target).closest(\".searchable\").find(\"dl\").show();\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd\").show();\n\t}\n\tpublic onModInputBlur(that, event, blockid, modid) {\n\t\t// console.log(\"onModInputBlur [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\tsetTimeout(function() {\n\t\t\t$(event.target).closest(\".searchable\").find(\"dl\").hide();\n\t\t}, 300);\n\t}\n\tpublic oninput(that, event) {\n\t\t// console.log(\"oninput : \" + that + \" - \" + event.target);\n\t\t// console.log(\"blocks : \" + JSON.stringify(this.blocks[0]));\n\t}\n\tpublic onDDHover(that, event, blockid, modid, modname) {\n\t\t// console.log(\"onHover : \" + JSON.stringify(this.blocks));\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd.selected\").removeClass(\"selected\");\n\t\t$(event.target).addClass(\"selected\");\n\t}\n\tpublic onDDClick(that, event, blockid, modid, modname) {\n\t\t// console.log(\"onDDClick : \" + event);\n\t\t// console.log(\"blocks : \" + JSON.stringify(filter.inst.blocks));\n\t\t// this is the DD list element\n\t\tlet ele: HTMLElement = event.target; //event.currentTarget;\n\n\t\t// this.blocks[blockid].mods[modid].name = modname; //$(ele).text();\n\t\tthis.modsref[modid].name = modname;\n\n\t\tlet input = $(ele).closest(\".searchable\").find(\"input\");\n\t\tinput.blur();\n\n\t\t// console.log(\"blocks : \" + JSON.stringify(filter.inst.blocks[0]));\n\t}\n\n\n}\n","<template>\n\n  <div name=\"modsearch\" class=\"searchable\">\n    <input name=\"modsearchinput\" type=\"text\" autocomplete=\"off\" placeholder=\"+Add Stat Mod\" value.bind=\"name\" onkeyup.call=\"filterFunction2($this,$event)\" onchange.call=\"oninput($this, $event)\" onfocus.call=\"onModInputFocus($this, $event, i, j)\"\n      onblur.call=\"onModInputBlur($this, $event, i, j)\">\n    <dl name=\"modsearchlist\" class=\"modlist\">\n      <section repeat.for=\"[section, mods] of modsSections\">\n        <dt>${section}</dt>\n        <dd repeat.for=\"modname of mods\" onmouseover.call=\"onDDHover($this, $event, i, j, modname)\" onclick.call=\"onDDClick($this, $event, i, j, modname)\">${modname}</dd>\n      </section>\n    </dl>\n  </div>\n\n</template>","\nimport { inject, PLATFORM } from 'aurelia-framework';\nimport { WebAPI } from 'api';\nimport { i18n, EnumStat, EnumWeaponStat, EnumItemType, EnumItemSlot } from './i18n';\n\nexport class db {\n\n\tpublic constructor() {\n\t\t// console.log(\"db ctor\");\n\t\tdb.init(true);\n\t}\n\n\tpublic static init(force?: boolean) {\n\t\t// i18n.readProperties(EnumStat, \"http://127.0.0.1:9000/res/i18n/stats/stats\");\n\t\t// i18n.readProperties(EnumWeaponStat, \"/res/i18n/weaponStats/weaponStats\");\n\t\t// i18n.readProperties(EnumItemType, \"/res/i18n/itemTypes/itemTypes\");\n\t\t// console.log(\"db init \" + force);\n\t\t// if (!localStorage.getItem(\"statsnames\") || force) db.setStatNames();\n\t}\n\n\tpublic static translateStat(str): String {\n\n\t\treturn \"\";\n\t}\n\n\tpublic static getImgUrl(item) {\n\t\tif (item == null) return \"\";\n\t\tlet name = item.imgUrl; // url0.substr(url0.lastIndexOf(\"/\"));\n\t\tif (item.type == \"Monture\") { //} EnumItemType.MOUNT.fr || item.itemType == EnumItemType.RHINENEETLE.fr || item.itemType == EnumItemType.DRAGOTURKEY.fr || item.itemType == EnumItemType.SEEMYOL.fr) {\n\t\t\treturn \"/src/res/items/Montures/\" + name; //item.dofusID + \".png\";\n\t\t}\n\t\t// let url0: string = item.imgUrl;\n\t\tlet url1 = \"/src/res/items0/\" + name;\n\t\treturn url1;\n\t}\n\n\tpublic static getStatColor(name: string) {\n\t\tswitch (name) {\n\t\t\tcase \"PA\": return \"color: gold;\"\n\t\t\tcase \"PM\": return \"color: #03fc3d;\"\n\t\t\tcase \"Vitalité\": return \"color: #e1c699;\";\n\t\t\t// case \"Vitalité\": return \"color: beige;\";\n\t\t\t// case \"Sagesse\": return \"color: purple;\";\n\t\t\tcase \"% Résistance Neutre\":\n\t\t\t\treturn \"color: gray;\";\n\t\t\tcase \"% Résistance Terre\":\n\t\t\tcase \"Force\":\n\t\t\t\treturn \"color: #965948;\"; // brown\n\t\t\tcase \"% Résistance Feu\":\n\t\t\tcase \"Intelligence\":\n\t\t\t\treturn \"color: #c42b00;\" // red\n\t\t\tcase \"% Résistance Eau\":\n\t\t\tcase \"Chance\":\n\t\t\t\treturn \"color: #34bdeb;\" // blue\n\t\t\tcase \"% Résistance Air\":\n\t\t\tcase \"Agilité\":\n\t\t\t\treturn \"color: #0d9403;\" // green\n\t\t\tcase \"Puissance\":\n\t\t\t\treturn \"color: purple;\"; //\n\t\t\tdefault: return \"\";\n\t\t}\n\t}\n\n\tpublic static getStatNames() {\n\t\t// console.log(\"db getStatNames\");\n\t\t// return new Map<string, string[]>(JSON.parse(localStorage.getItem(\"statsnames\")));\n\n\t\tvar sections = new Map<string, string[]>();\n\t\tsections.set(\"\", [\"Vie\", \"Initiative\", \"PA\", \"PM\", \"Portée\", \"Invocations\", \"% Critique\"]);\n\t\tsections.set(\"Caractéristiques primaires\", [\"Vitalité\", \"Sagesse\", \"Force\", \"Intelligence\", \"Chance\", \"Agilité\", \"Puissance\"]);\n\t\tsections.set(\"Dommages\", [\n\t\t\t\"Dommages\", \"Dommages neutre\", \"Dommages Terre\", \"Dommages Feu\", \"Dommages Eau\", \"Dommages Air\",\n\t\t\t\"Dommages aux pièges\", \"Puissance aux pièges\",\n\t\t\t\"Dommages Critiques\", \"Dommages de poussée\",\n\t\t\t\"% Dommages distance\", \"% Dommages mêlée\", \"% Dommages aux sorts\", \"% Dommages d'armes\"\n\t\t]);\n\t\tsections.set(\"Caractéristiques secondaires\", [\"Prospection\", \"Tacle\", \"Fuite\", \"Retrait PA\", \"Retrait PM\", \"Esquive PA\", \"Esquive PM\", \"Soins\"])\n\t\tsections.set(\"Résistances\", [\n\t\t\t\"% Résistance Neutre\", \"% Résistance Terre\", \"% Résistance Feu\", \"% Résistance Eau\", \"% Résistance Air\",\n\t\t\t\"Résistance Neutre\", \"Résistance Terre\", \"Résistance Feu\", \"Résistance Eau\", \"Résistance Air\",\n\t\t\t\"Résistance Critiques\", \"Résistance Poussée\",\n\t\t\t\"% Résistance distance\", \"% Résistance mêlée\"\n\t\t]);\n\t\treturn sections;\n\t}\n\t/*\n\tprivate static setStatNames() {\n\t\tconsole.log(\"db setStatNames\");\n\t\tvar sections = new Map<string, string[]>();\n\t\tsections.set(\"\", [\"Vie\", \"Initiative\", \"PA\", \"PM\", \"Portée\", \"Invocation\", \"% Critique\"]);\n\t\tsections.set(\"Caractéristiques primaires\", [\"Vitalité\", \"Sagesse\", \"Force\", \"Intelligence\", \"Chance\", \"Agilité\", \"Puissance\"]);\n\t\tsections.set(\"Dommages\", [\n\t\t\t\"Dommages\", \"Dommages neutre\", \"Dommages Terre\", \"Dommages Feu\", \"Dommages Eau\", \"Dommages Air\",\n\t\t\t\"Dommages aux pièges\", \"Puissance aux pièces\",\n\t\t\t\"Dommages Critiques\", \"Dommages de poussée\",\n\t\t\t\"% Dommages distance\", \"% Dommages mêlée\", \"% Dommages aux sorts\", \"% Dommages d'armes\"\n\t\t]);\n\t\tsections.set(\"Caractéristiques secondaires\", [\"Prospection\", \"Tacle\", \"Fuite\", \"Retrait PA\", \"Retrait PM\", \"Esquive PA\", \"Esquive PM\", \"Soins\"])\n\t\tsections.set(\"Résistances\", [\n\t\t\t\"% Résistance Neutre\", \"% Résistance Terre\", \"% Résistance Feu\", \"% Résistance Eau\", \"% Résistance Air\",\n\t\t\t\"Résistance Neutre\", \"Résistance Terre\", \"Résistance Feu\", \"Résistance Eau\", \"Résistance Air\",\n\t\t\t\"Résistance Critiques\", \"Résistance Poussée\",\n\t\t\t\"% Résistance distance\", \"% Résistance mêlée\"\n\t\t]);\n\t\tlocalStorage.setItem(\"statsnames\", JSON.stringify(Array.from(sections.entries())));\n\t}\n\t*/\n\tpublic static getElementsStats() {\n\t\treturn [\"Force\", \"Intelligence\", \"Chance\", \"Agilité\"];\n\t}\n\tpublic static getElementsNames() {\n\t\treturn [\"Neutre\", \"Terre\", \"Feu\", \"Eau\", \"Air\"];\n\t}\n\tpublic static getStatByElement(ele: string) {\n\t\tif (ele == \"Neutre\") return \"Force\";\n\t\treturn this.getElementsStats()[this.getElementsNames().indexOf(ele) - 1];\n\t}\n\tpublic static getBaseStatNames() {\n\t\treturn [\"Vitalité\", \"Sagesse\", \"Force\", \"Intelligence\", \"Chance\", \"Agilité\"];\n\t}\n\tpublic static getCombatStatsNames() {\n\t\treturn [\n\t\t\t\"Tacle\", \"Esquive PA\", \"Esquive PM\", \"Résistance Critiques\", \"Résistance Poussée\",\n\t\t\t// \"Résistance Neutre\", \"Résistance Terre\", \"Résistance Feu\", \"Résistance Eau\", \"Résistance Air\",\n\t\t\t// \"% Résistance Neutre\", \"% Résistance Terre\", \"% Résistance Feu\", \"% Résistance Eau\", \"% Résistance Air\",\n\t\t];\n\t}\n\n\tpublic static getSlotNames() {\n\t\treturn [\n\t\t\t'Amulette', 'Bouclier', 'Anneau1', 'Ceinture', 'Bottes',\n\t\t\t'Chapeau', 'Arme', 'Anneau2', 'Cape', 'Familier',\n\t\t\t'Dofus1', 'Dofus2', 'Dofus3', 'Dofus4', 'Dofus5', 'Dofus6',\n\t\t];\n\t}\n\tpublic static getItemsTypes() {\n\t\treturn [\"Amulette\", \"Anneau\", \"Chapeau\", \"Cape\", \"Sac à dos\", \"Ceinture\", \"Bottes\", \"Bouclier\", \"Dofus\", \"Trophée\"]\n\t}\n\tpublic static getWeaponsTypes() {\n\t\treturn [\"Épée\", \"Marteau\", \"Pelle\", \"Hache\", \"Bâton\", \"Dague\", \"Arc\", \"Baguette\", \"Faux\", \"Pioche\", \"Arme magique\", \"Outil\"]\n\t}\n\tpublic static getPetTypes() {\n\t\treturn [\"Familier\", \"Montilier\", \"Montures\"]; // Montures inclu les dd, muldos et volkornes\n\t}\n\tpublic static getWeaponCharacteristics() {\n\t\treturn [\"PA\", \"Portée\", \"CC\"];\n\t}\n\tpublic static getSpellCharacteristics() {\n\t\treturn [\"PA\", \"Portée\", \"CC\", \"LoS\"];\n\t}\n\n\tpublic static getIconStyle(mod: string) {\n\t\tif (mod == \"PA\") return db.sprite(97, 243);\n\t\tif (mod == \"PM\") return db.sprite(97, 52);\n\t\tif (mod.toLowerCase().includes(\"portée\")) return db.sprite(97, 128);\n\n\t\tif (mod.toLowerCase().includes(\"initiative\")) return db.sprite(97, 205);\n\t\tif (mod.toLowerCase().includes(\"invocation\")) return db.sprite(97, 507);\n\t\tif (mod.toLowerCase().includes(\"% critique\")) return db.sprite(97, 589);\n\t\tif (mod.toLowerCase().includes(\"prospection\")) return db.sprite(97, 279);\n\n\t\tif (mod.toLowerCase().includes(\"vie\")) return db.sprite(97, 919);\n\t\tif (mod.toLowerCase().includes(\"vitalité\")) return db.sprite(97, 319);\n\t\tif (mod.toLowerCase().includes(\"sagesse\")) return db.sprite(97, 358);\n\n\t\tif (mod.toLowerCase().includes(\"neutre\")) return db.sprite(95, 15);\n\t\tif (mod.toLowerCase().includes(\"force\") || mod.toLowerCase().includes(\"terre\")) return db.sprite(97, 432);\n\t\tif (mod.toLowerCase().includes(\"intelligence\") || mod.toLowerCase().includes(\"feu\")) return db.sprite(97, 394);\n\t\tif (mod.toLowerCase().includes(\"chance\") || mod.toLowerCase().includes(\"eau\")) return db.sprite(97, 89);\n\t\tif (mod.toLowerCase().includes(\"agilité\") || mod.toLowerCase().includes(\"air\")) return db.sprite(97, 167);\n\t\tif (mod == \"Puissance\") return db.sprite(97, 1108);\n\n\t\tif (mod.toLowerCase().includes(\"tacle\")) return db.sprite(97, 545);\n\t\tif (mod.toLowerCase().includes(\"fuite\")) return db.sprite(97, 469);\n\n\t\tif (mod.toLowerCase().includes(\"résistance poussée\")) return db.sprite(97, 832);\n\t\tif (mod.toLowerCase().includes(\"résistance critique\")) return db.sprite(97, 1200);\n\t\tif (mod.toLowerCase().includes(\"esquive pm\")) return db.sprite(97, 1016);\n\t\tif (mod.toLowerCase().includes(\"esquive pa\")) return db.sprite(97, 1064);\n\t\tif (mod.toLowerCase().includes(\"retrait pa\")) return db.sprite(97, 1340);\n\t\tif (mod.toLowerCase().includes(\"retrait pm\")) return db.sprite(97, 1340);\n\n\t\tif (mod.toLowerCase().includes(\"soin\")) return db.sprite(97, 966);\n\t\tif (mod == \"Dommages\") return db.sprite(97, 1156);\n\t\tif (mod == \"Dommages Poussée\") return db.sprite(97, 872);\n\t\tif (mod == \"Dommages Critiques\") return db.sprite(97, 1248);\n\t\tif (mod == \"Puissance aux pièges\") return db.sprite(97, 672);\n\t\tif (mod == \"Dommages aux pièges\") return db.sprite(97, 712);\n\n\t\treturn \"\";\n\t}\n\tprivate static sprite(x: number, y: number) {\n\t\treturn \"display: inline-block; width: 22px; height: 22px; background-image: url('/src/res/icons.png'); background-position: -\" + x + \"px; background-position-y: -\" + y + \"px; zoom: 1.0; vertical-align: middle;\"\n\t}\n\n\n\tpublic static save(build) {\n\n\t}\n\tpublic static load(buildname) {\n\n\t}\n\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","\n// import { StatEnumEn, ItemTypeEn, ItemSlotEn } from './constants_en';\n// import { StatEnumFr, ItemTypeFr, ItemSlotFr } from './constants_fr';\n\n// import * as PropertiesReader from 'properties-reader';\n// import PropertiesReader = require('properties-reader');\n\n// import * as fs from 'fs';\n// import * as path from 'path';\n\n// import * as properties from 'properties';\n// import properties = require(\"properties\");\n\n// import * as stats_fr from 'stats.properties';\n\nexport class i18n {\n\n\t// public static stats = new Map<string, string>();\n\t// public static itemType = new Map<string, string>();\n\t// public static itemSlot = new Map<string, string>();\n\t//\n\t// public constructor() {\n\t// \tlet keysEn = Object.keys(StatEnumEn.inst);\n\t// \tfor (let key in keysEn) {\n\t// \t\ti18n.stats[StatEnumEn.inst[key]] = StatEnumFr.inst[key];\n\t// \t}\n\t// }\n\t//\n\t// public static statByKey(key) {\n\t// \treturn StatEnumFr.inst[key];\n\t// }\n\t// public static statByName(str) {\n\t// \treturn this.stats[str];\n\t// }\n\n\tpublic static readProperties(clazz, bundle) {\n\t\t// properties(\"\");\n\t\t// properties.parse(\"myprop = hello\", { path: true }, function(error, obj) {\n\t\t// \tif (error) return console.error(error);\n\t\t//\n\t\t// \tconsole.log(obj);\n\t\t// \t//{ a: 1, b: 2 }\n\t\t// });\n\n\t\t// console.log(\"i18n file : \" + file);\n\t\t// var bundle_fr = PropertiesReader(bundle + \"_fr.properties\");\n\t\t// var bundle_en = PropertiesReader(bundle + \"_en.properties\");\n\n\t\t// let keys = Object.keys(clazz);\n\t\t// for (let key in keys) {\n\t\t// \tlet o = clazz[key];\n\t\t// \to.key = key;\n\t\t// \to.fr = bundle_fr.get(key);\n\t\t// \to.en = bundle_en.get(key);\n\t\t// \tclazz.en_to_fr[o.en] = o.fr;\n\t\t// }\n\t}\n\n}\n\n\n\nexport class EnumItemSlot {\n\tpublic static WEAPON = \"Arme\";\n\tpublic static HAT = \"Chapeau\";\n\tpublic static CAPE = \"Cape\";\n\tpublic static AMULET = \"Amulette\";\n\tpublic static RING = \"Anneau\";\n\tpublic static RING1 = \"Anneau1\";\n\tpublic static RING2 = \"Anneau2\";\n\tpublic static BELT = \"Ceinture\";\n\tpublic static BOOTS = \"Bottes\";\n\tpublic static PET = \"Familier\";\n\tpublic static DOFUS1 = \"Dofus1\";\n\tpublic static DOFUS2 = \"Dofus2\";\n\tpublic static DOFUS3 = \"Dofus3\";\n\tpublic static DOFUS4 = \"Dofus4\";\n\tpublic static DOFUS5 = \"Dofus5\";\n\tpublic static DOFUS6 = \"Dofus6\";\n}\n\nexport class EnumItemType {\n\tpublic key: String;\n\tpublic fr: String;\n\tpublic en: String;\n\n\tpublic constructor() {\n\t}\n\n\tpublic static en_to_fr = {};\n\n\t// items\n\tpublic static HAT = new EnumItemType();\n\tpublic static CAPE = new EnumItemType();\n\tpublic static BACKPACK = new EnumItemType();\n\tpublic static AMULET = new EnumItemType();\n\tpublic static RING = new EnumItemType();\n\tpublic static BELT = new EnumItemType();\n\tpublic static BOOTS = new EnumItemType();\n\t// dofus\n\tpublic static DOFUS = new EnumItemType();\n\tpublic static TROPHY = new EnumItemType();\n\tpublic static PRYSMARADITE = new EnumItemType();\n\t// pets\n\tpublic static PET = new EnumItemType();\n\tpublic static PETSMOUNT = new EnumItemType();\n\t// mounts\n\tpublic static MOUNT = new EnumItemType();\n\tpublic static SEEMYOL = new EnumItemType();\n\tpublic static DRAGOTURKEY = new EnumItemType();\n\tpublic static RHINENEETLE = new EnumItemType();\n\t// weapons\n\tpublic static SWORD = new EnumItemType();\n\tpublic static HAMMER = new EnumItemType();\n\tpublic static SHOVEL = new EnumItemType();\n\tpublic static AXE = new EnumItemType();\n\tpublic static STAFF = new EnumItemType();\n\tpublic static DAGGER = new EnumItemType();\n\tpublic static BOW = new EnumItemType();\n\tpublic static WAND = new EnumItemType();\n\tpublic static SCYTHE = new EnumItemType();\n\tpublic static PICKAXE = new EnumItemType();\n\tpublic static MAGIC_WEAPON = new EnumItemType();\n\tpublic static TOOL = new EnumItemType();\n}\n\nexport class EnumWeaponStat {\n\tpublic key: String;\n\tpublic fr: String;\n\tpublic en: String;\n\n\tpublic constructor() {\n\t}\n\n\tpublic static en_to_fr = {};\n\n\t// properties\n\tpublic static USES_PER_TURN = new EnumWeaponStat();\n\tpublic static RANGE_MIN = new EnumWeaponStat();\n\tpublic static RANGE_MAX = new EnumWeaponStat();\n\tpublic static COST = new EnumWeaponStat();\n\tpublic static DMG_CRITICAL = new EnumWeaponStat();\n\tpublic static CRITICAL = new EnumWeaponStat();\n\n\t// effects\n\tpublic static AP = new EnumWeaponStat();\n\tpublic static MP = new EnumWeaponStat();\n\n\tpublic static DMG_NEUTRAL = new EnumWeaponStat();\n\tpublic static DMG_FIRE = new EnumWeaponStat();\n\tpublic static DMG_EARTH = new EnumWeaponStat();\n\tpublic static DMG_WATER = new EnumWeaponStat();\n\tpublic static DMG_AIR = new EnumWeaponStat();\n\n\tpublic static STEAL_NEUTRAL = new EnumWeaponStat();\n\tpublic static STEAL_FIRE = new EnumWeaponStat();\n\tpublic static STEAL_EARTH = new EnumWeaponStat();\n\tpublic static STEAL_WATER = new EnumWeaponStat();\n\tpublic static STEAL_AIR = new EnumWeaponStat();\n}\n\nexport class EnumStat {\n\tpublic key: String;\n\tpublic fr: String;\n\tpublic en: String;\n\n\tpublic constructor() {\n\t}\n\n\tpublic static en_to_fr = {};\n\n\n\tpublic static LIFE = new EnumStat();\n\n\tpublic static AP = new EnumStat();\n\tpublic static MP = new EnumStat();\n\tpublic static RANGE = new EnumStat();\n\tpublic static INITIATIVE = new EnumStat();\n\tpublic static PROSPECTING = new EnumStat();\n\tpublic static CRITICAL = new EnumStat();\n\tpublic static SUMMONS = new EnumStat();\n\tpublic static LOCK = new EnumStat();\n\tpublic static DODGE = new EnumStat();\n\tpublic static AP_PARRY = new EnumStat();\n\tpublic static MP_PARRY = new EnumStat();\n\tpublic static AP_REDUCTION = new EnumStat();\n\tpublic static MP_REDUCTION = new EnumStat();\n\tpublic static HEALS = new EnumStat();\n\tpublic static PODS = new EnumStat();\n\tpublic static REFLECT = new EnumStat();\n\n\tpublic static VITALITY = new EnumStat();\n\tpublic static WISDOM = new EnumStat();\n\tpublic static INTELLIGENCE = new EnumStat();\n\tpublic static STRENGTH = new EnumStat();\n\tpublic static CHANCE = new EnumStat();\n\tpublic static AGILITY = new EnumStat();\n\tpublic static POWER = new EnumStat();\n\n\tpublic static DMG_PER_FINAL = new EnumStat();\n\tpublic static DMG_PER_SPELL = new EnumStat();\n\tpublic static DMG_PER_WEAPON = new EnumStat();\n\tpublic static DMG_PER_MELEE = new EnumStat();\n\tpublic static DMG_PER_RANGED = new EnumStat();\n\tpublic static DMG_PER_TRAP = new EnumStat();\n\n\tpublic static DMG = new EnumStat();\n\tpublic static DMG_NEUTRAL = new EnumStat();\n\tpublic static DMG_FIRE = new EnumStat();\n\tpublic static DMG_EARTH = new EnumStat();\n\tpublic static DMG_WATER = new EnumStat();\n\tpublic static DMG_AIR = new EnumStat();\n\tpublic static DMG_CRITICAL = new EnumStat();\n\tpublic static DMG_PUSHBACK = new EnumStat();\n\tpublic static DMG_TRAP = new EnumStat();\n\n\n\tpublic static RES_PER_FINAL = new EnumStat();\n\tpublic static RES_PER_SPELL = new EnumStat();\n\tpublic static RES_PER_WEAPON = new EnumStat();\n\tpublic static RES_PER_MELEE = new EnumStat();\n\tpublic static RES_PER_RANGED = new EnumStat();\n\n\tpublic static RES_PER_NEUTRAL = new EnumStat();\n\tpublic static RES_PER_FIRE = new EnumStat();\n\tpublic static RES_PER_EARTH = new EnumStat();\n\tpublic static RES_PER_WATER = new EnumStat();\n\tpublic static RES_PER_AIR = new EnumStat();\n\n\tpublic static RES_NEUTRAL = new EnumStat();\n\tpublic static RES_FIRE = new EnumStat();\n\tpublic static RES_EARTH = new EnumStat();\n\tpublic static RES_WATER = new EnumStat();\n\tpublic static RES_AIR = new EnumStat();\n\n}\n","import { Aurelia } from 'aurelia-framework';\nimport environment from './environment';\n\nexport function configure(aurelia: Aurelia) {\n\tconsole.log(\"configure main1\");\n\n\taurelia.use\n\t\t.standardConfiguration()\n\t\t.feature('resources');\n\n\taurelia.use.developmentLogging(environment.debug ? 'debug' : 'warn');\n\n\tif (environment.testing) {\n\t\taurelia.use.plugin('aurelia-testing');\n\t}\n\n\taurelia.start().then(() => aurelia.setRoot());\n}\n","import { inject, PLATFORM, lazy } from 'aurelia-framework';\nimport { builds } from '../builds/builds';\nimport { db } from '../../db';\nimport { WebAPI } from '../../api';\nimport { Router } from 'aurelia-router';\nimport * as Hashkit from 'hashkit';\n\n@inject(Router)\nexport class build {\n\n\tpublic static inst: build;\n\n\tprivate api: WebAPI;\n\tpublic router: Router;\n\n\t// build name\n\tpublic name: string;\n\t// items\n\tpublic items: Map<string, any>;\n\t// sets (id, set object)\n\tpublic sets: any[] = []; //Map<number, any>;\n\t// total stats\n\tpublic stats: Map<string, number>;\n\t// base stats\n\tpublic bases: Map<string, number>;\n\t// exo stats\n\tpublic exos: Map<string, number>;\n\t// faudrait faire une map parchos aussi\n\n\tpublic static nextRing: number = 1;\n\tpublic static nextDofus: number = 1;\n\tpublic static hash = new Hashkit();\n\n\tconstructor(@lazy(Router) private getRouter: () => Router) {\n\t\t// console.log(\"ctor build\");\n\t\t// this.router = router;\n\t\tthis.api = new WebAPI();\n\t\tbuild.inst = this;\n\t}\n\n\tpublic activate(params, routeConfig) {\n\t\tlet data = params.data; //build.hash.decode(params.data);\n\t\t// console.log(\"activate build data : \" + data);\n\t\tthis.clear(false);\n\t\tif (data != undefined && data != null) {\n\t\t\tthis.importsmol(data);\n\t\t}\n\t}\n\n\tpublic importsmol(data: string) {\n\t\t// data = { name: \"\", items: [], bases: [] };\n\t\tlet split = data.split(\"-\");\n\t\tlet name = split[0];\n\t\tlet bases = split.slice(1, 6).map(i => build.hash.decode(i));\n\t\tlet items = split.slice(7).map(i => build.hash.decode(i));\n\t\t// let obj = JSON.parse(data);\n\t\t// get all items\n\t\tthis.api.getItems([{\n\t\t\tankamaId: { $in: items }\n\t\t}]).then(r => {\n\t\t\t// name\n\t\t\tthis.name = name;\n\t\t\tbuild.setName(this.name);\n\t\t\t// set all items from returned array\n\t\t\tr.content.forEach(i => build.setItem(i, true));\n\t\t\t// save items\n\t\t\tbuild.setItems(this.items);\n\t\t\t// save bases\n\t\t\tfor (let e = 0; e < bases.length; e++) {\n\t\t\t\tthis.bases.set(db.getBaseStatNames()[e], bases[e]);\n\t\t\t}\n\t\t\tbuild.setBases(this.bases);\n\t\t\t// save exos\n\t\t\tvar exos = new Map<string, number>();\n\t\t\texos.set(\"PA\", 1);\n\t\t\texos.set(\"PM\", 1);\n\t\t\tbuild.setExos(exos);\n\t\t\t// save sets\n\t\t\tbuild.calcSets(this.items);\n\t\t\t// this.save();\n\t\t\t// this.reloadTotalStats();\n\t\t});\n\t}\n\n\t// ----------------------------------------------  View methods ----------------------------------------------\n\n\tpublic clear(force: boolean) {\n\t\tif (!localStorage.getItem(\"build.name\") || force) build.setName(\"unnamed build\");\n\t\tif (!localStorage.getItem(\"build.sets\") || force) build.setSets([]);\n\t\tif (!localStorage.getItem(\"build.items\") || force) build.setItems(new Map<string, any>());\n\t\tif (!localStorage.getItem(\"build.bases\") || force) {\n\t\t\tvar bases = new Map<string, number>();\n\t\t\tbases.set(\"Vitalité\", 100);\n\t\t\tbases.set(\"Sagesse\", 100);\n\t\t\tbases.set(\"Force\", 100);\n\t\t\tbases.set(\"Intelligence\", 100);\n\t\t\tbases.set(\"Chance\", 100);\n\t\t\tbases.set(\"Agilité\", 100);\n\t\t\tbuild.setBases(bases);\n\t\t}\n\t\tif (!localStorage.getItem(\"build.exos\") || force) {\n\t\t\tvar exos = new Map<string, number>();\n\t\t\texos.set(\"PA\", 1);\n\t\t\texos.set(\"PM\", 1);\n\t\t\tbuild.setExos(exos);\n\t\t}\n\t\t// pas besoin de reset les stats car on le fait dans this.reloadTotalStats();\n\n\t\tbuild.inst.name = build.getName();\n\t\tbuild.inst.stats = build.getStats();\n\t\tbuild.inst.sets = build.getSets();\n\t\tbuild.inst.items = build.getItems();\n\t\tbuild.inst.bases = build.getBases();\n\t\tbuild.inst.exos = build.getExos();\n\n\t\tthis.reloadTotalStats();\n\n\t\t// if (force) {\n\t\t// \t// reload la page après un reset/new build pour reset l'affichage des stats et des images d'items. tout le reste est bindé sauf ça.\n\t\t// \t// TODO le navigate ne reload pas la page\n\t\t// \tthis.router.navigate(\"/build\");\n\t\t// }\n\t}\n\n\tpublic save() {\n\t\tbuilds.save(this);\n\t}\n\tpublic export() {\n\t\treturn JSON.stringify({\n\t\t\t\"name\": this.name,\n\t\t\t\"items\": Array.from(this.items.entries()),\n\t\t\t\"stats\": Array.from(this.stats.entries()),\n\t\t\t\"bases\": Array.from(this.bases.entries()),\n\t\t\t\"exos\": Array.from(this.exos.entries()),\n\t\t\t\"sets\": this.sets\n\t\t});\n\t}\n\n\t// ----------------------------------------------  Static methods ----------------------------------------------\n\n\tpublic static import(json: string) {\n\t\tif (json == null) {\n\t\t\tbuild.inst.clear(true); return;\n\t\t}\n\t\tvar b = JSON.parse(json);\n\t\tvar obj = {\n\t\t\t\"name\": b.name,\n\t\t\t\"items\": new Map<string, any>(b.items),\n\t\t\t\"stats\": new Map<string, number>(b.stats),\n\t\t\t\"bases\": new Map<string, number>(b.bases),\n\t\t\t\"exos\": new Map<string, number>(b.exos),\n\t\t\t\"sets\": b.sets,\n\t\t};\n\t\tbuild.setName(obj.name);\n\t\tbuild.setSets(obj.sets);\n\t\tbuild.setItems(obj.items);\n\t\tbuild.setStats(obj.stats);\n\t\tbuild.setBases(obj.bases);\n\t\tbuild.setExos(obj.exos);\n\t}\n\n\t// public static load(b) {\n\t// \tbuild.setName(b.name);\n\t// \tbuild.setSets(b.sets);\n\t// \tbuild.setItems(b.items);\n\t// \tbuild.setStats(b.stats);\n\t// \tbuild.setBases(b.bases);\n\t// \tbuild.setExos(b.exos);\n\t// }\n\n\tpublic reloadTotalStats() {\n\t\t// reset stats\n\t\tthis.stats.clear();\n\t\tbuild.setStats(this.stats);\n\t\t// add stats\n\t\tbuild.addTotalStat(\"Vie\", 1050);\n\t\tbuild.addTotalStat(\"PA\", 6 + 1);\n\t\tbuild.addTotalStat(\"PM\", 3);\n\t\tbuild.addTotalStat(\"Prospection\", 100);\n\n\t\tthis.items.forEach((v, k) => {\n\t\t\tbuild.addItemStats(v);\n\t\t\t// build.setItem(v, true);\n\t\t});\n\t\tthis.bases.forEach((v, k) => {\n\t\t\tbuild.addTotalStat(k, v);\n\t\t});\n\t\tthis.exos.forEach((v, k) => {\n\t\t\tbuild.addTotalStat(k, v);\n\t\t});\n\t\t// console.log(\"reload stats sets : \" + JSON.stringify(this.sets));\n\t\tthis.sets.forEach((v, k) => {\n\t\t\tbuild.addSet(v);\n\t\t});\n\t\t// calcule initiative\n\t\tdb.getElementsStats().forEach(s => {\n\t\t\tif (this.stats.has(s)) {\n\t\t\t\tbuild.addTotalStat(\"Initiative\", this.stats.get(s));\n\t\t\t}\n\t\t});\n\t\t// calcule vie totale\n\t\tif (this.stats.has(\"Vitalité\")) {\n\t\t\tbuild.addTotalStat(\"Vie\", this.stats.get(\"Vitalité\"));\n\t\t}\n\t\t// calcule retrait et esquive\n\t\tif (this.stats.has(\"Sagesse\")) {\n\t\t\tlet sa = this.stats.get(\"Sagesse\");\n\t\t\tbuild.addTotalStat(\"Retrait PA\", Math.floor(sa / 10));\n\t\t\tbuild.addTotalStat(\"Retrait PM\", Math.floor(sa / 10));\n\t\t\tbuild.addTotalStat(\"Esquive PA\", Math.floor(sa / 10));\n\t\t\tbuild.addTotalStat(\"Esquive PM\", Math.floor(sa / 10));\n\t\t}\n\t\t// calcule fuite et tacle\n\t\tif (this.stats.has(\"Agilité\")) {\n\t\t\tlet agi = this.stats.get(\"Agilité\");\n\t\t\tbuild.addTotalStat(\"Fuite\", Math.floor(agi / 10));\n\t\t\tbuild.addTotalStat(\"Tacle\", Math.floor(agi / 10));\n\t\t}\n\t\t// calcule prospection\n\t\tif (this.stats.has(\"Chance\")) {\n\t\t\tlet cha = this.stats.get(\"Chance\");\n\t\t\tbuild.addTotalStat(\"Prospection\", Math.floor(cha / 10));\n\t\t}\n\t}\n\n\tprivate static addSet(set) {\n\t\t// console.log(\"build.addSet : \" + JSON.stringify(set));\n\t\tif (set.bonus && set.bonus.stats) {\n\t\t\t// console.log(\"set has bonuses\");\n\t\t\tset.bonus.stats.forEach(stat => {\n\t\t\t\t// console.log(\"set has stat : \" + JSON.stringify(stat));\n\t\t\t\tif (stat.max) {\n\t\t\t\t\tbuild.addTotalStat(stat.name, Number.parseInt(stat.max));\n\t\t\t\t} else {\n\t\t\t\t\tbuild.addTotalStat(stat.name, Number.parseInt(stat.min));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic static addItemStats(item) {\n\t\tif (item.statistics) {\n\t\t\titem.statistics.forEach(stat => {\n\t\t\t\tif (stat.max) {\n\t\t\t\t\tbuild.addTotalStat(stat.name, stat.max);\n\t\t\t\t} else {\n\t\t\t\t\tbuild.addTotalStat(stat.name, stat.min);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic static calcSets(items: Map<string, any>) {\n\t\tbuild.inst.sets = [];\n\t\tbuild.setSets(build.inst.sets);\n\t\t// console.log(\"build sets 1 : \" + build.inst.sets);\n\t\t// calcule le nombre d'items par panoplie\n\t\tlet setCounts = {};\n\t\titems.forEach((v, k) => {\n\t\t\tif (v.setId > 0) {\n\t\t\t\tif (!setCounts[v.setId]) setCounts[v.setId] = 1;\n\t\t\t\telse setCounts[v.setId] += 1;\n\t\t\t}\n\t\t});\n\t\t// ajoute les stats des panos\n\t\tlet setkeys = Object.keys(setCounts);\n\t\tsetkeys.forEach(id => {\n\t\t\tif (setCounts[id] > 1) {\n\t\t\t\t// console.log(\"set [\" + id + \"] : \" + setCounts[id]);\n\t\t\t\tbuild.inst.api.getSet(id).then(response => {\n\t\t\t\t\tlet set = response.content;\n\t\t\t\t\tbuild.inst.sets.push(set);\n\t\t\t\t\tbuild.addSet(set);\n\t\t\t\t\tbuild.setSets(build.inst.sets);\n\t\t\t\t\tbuild.inst.reloadTotalStats();\n\t\t\t\t\t// console.log(\"build sets 2 : \" + build.inst.sets);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static setItem(item, reset?) {\n\t\tvar items: Map<string, any> = build.getItems();\n\t\tvar slot: string = item.type;\n\t\tif (item.type == \"Anneau\") {\n\t\t\tslot = \"Anneau\" + build.nextRing;\n\t\t\tif (build.nextRing < 2) {\n\t\t\t\tbuild.nextRing++;\n\t\t\t} else if (build.nextRing == 2) {\n\t\t\t\tbuild.nextRing = 1;\n\t\t\t}\n\t\t}\n\t\tif (item.type == \"Dofus\" || item.type == \"Trophée\" || item.type == \"Prysmaradite\") {\n\t\t\tslot = \"Dofus\" + build.nextDofus;\n\t\t\tif (build.nextDofus < 6) {\n\t\t\t\tbuild.nextDofus++;\n\t\t\t} else if (build.nextRing >= 6) {\n\t\t\t\tbuild.nextDofus = 1;\n\t\t\t}\n\t\t}\n\t\tif (item.type == \"Sac à dos\") {\n\t\t\tslot = \"Cape\";\n\t\t}\n\t\tif (db.getWeaponsTypes().indexOf(item.type) != -1) {\n\t\t\tslot = \"Arme\";\n\t\t}\n\t\tif (db.getPetTypes().indexOf(item.type) != -1) {\n\t\t\tslot = \"Familier\";\n\t\t}\n\t\tconsole.log(\"build.setItem slot : \" + slot + \" (\" + item.type + \")\");\n\t\tif (db.getSlotNames().indexOf(slot) == -1) {\n\t\t\tconsole.log(\"build.setItem bad slot : \" + slot);\n\t\t\treturn;\n\t\t}\n\t\t// enlève les stats existantes\n\t\tif (!reset) build.removeItem(slot);\n\n\t\t// if(reset){\n\t\t// ajoute les stats du nouvel item\n\t\tif (item.statistics) {\n\t\t\titem.statistics.forEach(stat => {\n\t\t\t\tif (stat.max) {\n\t\t\t\t\tbuild.addTotalStat(stat.name, stat.max);\n\t\t\t\t} else {\n\t\t\t\t\tbuild.addTotalStat(stat.name, stat.min);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// }\n\n\t\t// console.log(\"set item : \" + slot + \" = \" + item.name);\n\t\t// set l'item dans la map\n\t\titems.set(slot, item);\n\t\t// save items in local storage\n\t\tbuild.setItems(items);\n\n\t\t// recalcule les panoplies\n\t\tif (!reset) {\n\t\t\tthis.calcSets(items);\n\t\t}\n\n\t\t// save build\n\t\tbuild.inst.save();\n\t}\n\n\tpublic static removeItem(slot: string) {\n\t\tvar items: Map<string, any> = build.getItems();\n\t\tvar item = items.get(slot);\n\t\tif (item == null) return;\n\t\t// enlève les stats existantes\n\t\tif (item.statistics) {\n\t\t\titem.statistics.forEach(stat => {\n\t\t\t\tif (stat.max) {\n\t\t\t\t\tbuild.addTotalStat(stat.name, -stat.max);\n\t\t\t\t} else {\n\t\t\t\t\tbuild.addTotalStat(stat.name, -stat.min);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// enlève l'item de la map\n\t\titems.delete(slot);\n\t\t// save items in local storage\n\t\tbuild.setItems(items);\n\t}\n\n\tpublic static setBaseStat(name: string, value: number) {\n\t\tvar bases: Map<string, number> = build.getBases() as Map<string, number>;\n\t\t// console.log(\"bases \" + JSON.stringify(bases));\n\t\tbuild.addTotalStat(name, value - (bases.get(name) || 0));\n\t\tbases.set(name, value);\n\t\tbuild.setBases(bases);\n\t}\n\n\tpublic static setExo(name: string, value: number) {\n\t\tvar exos: Map<string, number> = build.getExos();\n\t\tbuild.addTotalStat(name, value - (exos.get(name) || 0));\n\t\tif (value == 0) exos.delete(name);\n\t\telse exos.set(name, value);\n\t\tbuild.setExos(exos);\n\t}\n\n\tpublic static addTotalStat(name: string, value: number) {\n\t\tvar stats: Map<string, number> = build.getStats();\n\t\tvar existing = 0;\n\t\tif (stats.has(name)) {\n\t\t\texisting = stats.get(name);\n\t\t}\n\t\tstats.set(name, existing + value);\n\t\tbuild.setStats(stats);\n\t}\n\n\n\t// ----------------------------------------------  Storage methods ----------------------------------------------\n\n\tprivate static getItems() {\n\t\treturn new Map<string, any>(JSON.parse(localStorage.getItem(\"build.items\")));\n\t}\n\tprivate static setItems(items) {\n\t\t// if (!build.inst) build.inst = new build();\n\t\t// update view and localStorage\n\t\tif (build.inst) build.inst.items = items;\n\t\tlocalStorage.setItem(\"build.items\", JSON.stringify(Array.from(items.entries())));\n\t}\n\n\tprivate static getStats() {\n\t\treturn new Map<string, number>(JSON.parse(localStorage.getItem(\"build.stats\")));\n\t}\n\tprivate static setStats(stats) {\n\t\t// if (!build.inst) build.inst = new build();\n\t\t// update view and localStorage\n\t\tif (build.inst) build.inst.stats = stats;\n\t\tlocalStorage.setItem(\"build.stats\", JSON.stringify(Array.from(stats.entries())));\n\t}\n\n\tprivate static getBases() {\n\t\treturn new Map<string, number>(JSON.parse(localStorage.getItem(\"build.bases\")));\n\t}\n\tprivate static setBases(bases) {\n\t\t// if (!build.inst) build.inst = new build();\n\t\t// update view and localStorage\n\t\tif (build.inst) build.inst.bases = bases;\n\t\tlocalStorage.setItem(\"build.bases\", JSON.stringify(Array.from(bases.entries())));\n\t}\n\n\tprivate static getExos() {\n\t\treturn new Map<string, number>(JSON.parse(localStorage.getItem(\"build.exos\")));\n\t}\n\tprivate static setExos(exos) {\n\t\t// if (!build.inst) build.inst = new build();\n\t\t// update view and localStorage\n\t\tif (build.inst) build.inst.exos = exos;\n\t\tlocalStorage.setItem(\"build.exos\", JSON.stringify(Array.from(exos.entries())));\n\t}\n\n\tprivate static getName() {\n\t\treturn localStorage.getItem(\"build.name\");\n\t}\n\tprivate static setName(name: string) {\n\t\t// if (!build.inst) build.inst = new build();\n\t\tif (build.inst) build.inst.name = name;\n\t\tlocalStorage.setItem(\"build.name\", name);\n\t}\n\n\tprivate static getSets() {\n\t\tlet sets = localStorage.getItem(\"build.sets\");\n\t\tif (sets == \"null\" || sets == \"undefined\") return [];\n\t\treturn JSON.parse(sets);\n\t}\n\tprivate static setSets(sets) {\n\t\t// update view and localStorage\n\t\tif (build.inst) build.inst.sets = sets;\n\t\tlocalStorage.setItem(\"build.sets\", JSON.stringify(sets));\n\t}\n\n\n}\n","<template>\n\n  <require from=\"./components/items\"></require>\n  <require from=\"./components/spells\"></require>\n  <require from=\"./components/sets\"></require>\n  <require from=\"./components/options\"></require>\n  <require from=\"./components/weapon\"></require>\n  <!-- <require from=\"./components/itemSlot\"></require> -->\n  <require from=\"./components/stats/totalstats\"></require>\n  <require from=\"./components/stats/combatstats\"></require>\n  <require from=\"./components/stats/basestats\"></require>\n  <require from=\"./components/stats/addedstats\"></require>\n\n  <div class=\"container\">\n    <div class=\"row\">\n\n      <!-- total stats -->\n      <totalstats class=\"col-3\" stats.bind=\"stats\"></totalstats>\n\n      <!-- center -->\n      <div class=\"col-6\">\n        <div class=\"container\">\n          <!-- items -->\n          <items class=\"row\" items.bind=\"items\"></items>\n          <!-- stats visibles en combat-->\n          <combatstats class=\"row\" stats.bind=\"stats\" style=\"margin-top: 20px; margin-left: 5px;\"></combatstats>\n          <!-- sets -->\n          <sets class=\"row\" sets.bind=\"sets\" style=\"margin-left: 5px;\"></sets>\n          <!-- weapon -->\n          <weapon class=\"row\" data.bind=\"$this\" style=\"margin-left: 5px;\"></weapon>\n          <!-- spells -->\n          <spells class=\"row\" style=\"margin-left: 5px;\"></spells>\n        </div>\n      </div>\n\n      <!-- right -->\n      <div class=\"col\">\n        <div class=\"\">\n          <!-- options -->\n          <div class=\"\">\n            <options build.bind=$this></options>\n          </div>\n          <!-- base stats & parchos -->\n          <div class=\"\" style=\"margin-top: 20px;\">\n            <basestats class=\"\" stats.bind=\"bases\"></basestats>\n          </div>\n          <!-- exos -->\n          <div class=\"\" style=\"margin-top: 20px;\">\n            <addedstats class=\"\" stats.bind=\"exos\"></addedstats>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n</template>","import { Router } from 'aurelia-router';\nimport { inject, bindable, computedFrom } from 'aurelia-framework';\nimport { db } from '../../../db';\n//\n// const styl = require('./slot1.css');\n// \tstyles = styl;\n\n\n@inject(Router)\nexport class ItemSlot {\n\n\tpublic router: Router;\n\n\t// item object\n\t@bindable\n\tpublic item: any;\n\n\t// slot name\n\t@bindable\n\tpublic slotname: any;\n\n\tconstructor(router: Router) {\n\t\tthis.router = router;\n\t}\n\n\t// go search items\n\tpublic onclick() {\n\t\t// location.href = \"/items\";\n\t\tthis.router.navigate(\"/items\");\n\t}\n\n\tattached() {\n\t\tvar itemname = this.item ? this.item.name : \"undefined\";\n\t\t// console.log(\"itemslot attached [\" + itemname + \"] : \" + this.slotname); //this.getImgUrl());\n\t}\n\n\t@computedFrom('item')\n\tpublic get imgUrl(): string {\n\t\treturn db.getImgUrl(this.item);\n\t}\n\n\tpublic test() {\n\t\treturn \"hi\";;\n\t}\n\n}\n","\n.itemSlot {\n  height: 80px;\n  width: 80px;\n  /* color: var(--front1); */\n  /* background-color: #555555; */\n  /* background-color: var(--accent1); */\n  border: 1px solid var(--accent1);\n  z-index: 0;\n}\n\n\n.itemSlot img {\n  height: 80px;\n  width: 80px;\n  z-index: 0;\n}\n\n.itemSlot:hover {\n  border: 1px solid var(--accent0);\n}\n\n.itemSlot itemsheet {\n  position: relative;\n  /* float: */\n  display: inline-block;\n  visibility: collapse;\n  width: 260px;\n  background-color: var(--bg0);\n  z-index: 94561239 !important;\n  pointer-events: none;\n  cursor: default;\n}\n.itemSlot:hover itemsheet {\n  /* display: flex; */\n  visibility: visible;\n  opacity: 95%;\n}\n","<template>\n  <require from=\"./itemSlot.css\"></require>\n  <require from=\"../../items/itemsheet\"></require>\n\n\n  <div class=\"itemSlot\" style=\"margin: 0 auto;\" onclick.call=\"onclick()\">\n\n    <img if.bind=\"item\" src.bind=\"imgUrl\" alt=\"${slotname}\">\n    <div if.bind=\"item == null\" innerHTML.bind=\"slotname\"></div>\n\n    <!-- need a hover as well -->\n    <itemsheet data.bind=\"item\"></itemsheet>\n\n    <!-- need a click to search items -->\n\n  </div>\n</template>\n","import { bindable } from 'aurelia-framework';\nimport { db } from '../../../db'\n\nexport class Items {\n\n\tpublic data: any[];\n\n\t// <slot, item>\n\t@bindable public items: Map<string, any>;\n\n\tconstructor() {\n\t\t// slot names\n\t\tthis.data = db.getSlotNames();\n\t\t// console.log(\"slot names : \" + this.data);\n\t}\n\n\n\tattached() {\n\t\t// if (this.items.has(\"Chapeau\"))\n\t\t// console.log(\"attached chapeau : \" + this.items.get(\"Chapeau\").name); // good works\n\t}\n\n}\n","<template>\n  <require from=\"./itemSlot\"></require>\n\n  <div class=\"col-sm\">\n    <!-- itemsSlots[0,6,5,1,9] -->\n    <item-slot repeat.for=\"i of 5\" style=\"margin-bottom: 2px;\" id=\"${data[i]}\" item.bind=\"items.get(data[i])\" slotname.bind=\"data[i]\"></item-slot>\n  </div>\n\n  <div class=\"col-sm\">\n    <!-- itemsSlots[4,7,5,2,3] -->\n    <item-slot repeat.for=\"i of 5\" style=\"margin-bottom: 2px;\" id=\"${data[i+5]}\" item.bind=\"items.get(data[i+5])\" slotname.bind=\"data[i+5]\"></item-slot>\n  </div>\n\n  <div class=\"col-sm\">\n    <!-- dofus[1,2,3,4,5,6] -->\n    <item-slot repeat.for=\"i of 6\" style=\"margin-bottom: 2px;\" id=\"${data[i+10]}\" item.bind=\"items.get(data[i+10])\" slotname.bind=\"data[i+10]\"></item-slot>\n  </div>\n\n</template>","import { bindable, computedFrom } from 'aurelia-framework';\nimport { build } from '../build';\nimport { db } from '../../../db';\nimport { PastebinAPI } from 'pastebin-ts/dist/api';\nimport { Hashkit } from 'hashkit';\n\nexport class options {\n\n\t@bindable\n\tpublic build: build;\n\tpublic exportlink;\n\n\tpublic pb: PastebinAPI;\n\n\tpublic constructor() {\n\t}\n\n\tpublic bind() {\n\n\t}\n\n\tpublic reset() {\n\t\tbuild.inst.clear(true);\n\t}\n\tpublic save() {\n\t\tbuild.inst.save();\n\t}\n\n\t@computedFrom('build')\n\tpublic get copyUrl(): string {\n\t\tlet data = { name: this.build.name, items: [], bases: [] };\n\n\t\tthis.build.items.forEach((item, slot) => {\n\t\t\tdata.items.push(build.hash.encode(item.ankamaId));\n\t\t});\n\t\tdb.getBaseStatNames().forEach(e => {\n\t\t\tdata.bases.push(build.hash.encode(this.build.bases.get(e) || 0));\n\t\t});\n\n\t\tlet output: string = data.name + \"-\";\n\t\toutput += data.bases.join(\"-\") + \"-\";\n\t\toutput += data.items.join(\"-\");\n\t\toutput = \"http://\" + location.host + \"/build?data=\" + output;\n\t\treturn output;\n\t}\n\n\t// create a url @ http://url/build/datastring and push it to clipboard\n\tpublic export() {\n\t\t// create pastebin\n\t\t// copy link to clipboard\n\t\t// tooltip says \"Lien copié!\"\n\n\t\t// let b = build.inst.export();\n\n\n\t\t// on a pas le droit de copier :(  (faut https)\n\t\t// navigator.clipboard.writeText(output);\n\t\tthis.exportlink.value = this.copyUrl;\n\t\t// console.log(\"exportlink : \" + this.exportlink + \" = \" + this.exportlink.value);\n\t}\n\n\t// import from url @ http://url/build/datastring\n\t// this should be in build.ts\n\tpublic import() {\n\t\tlet input = \"decrypt(string)\"; // input = json string = {name, [itemIds][basestats]}\n\n\t\t// affiche un input text dans lequel mettre le lien pastebin,\n\t\t// puis click sur import\n\t\t// le build est chargé (pas savé)\n\t\tnavigator.clipboard.readText()\n\t\t\t.then(text => {\n\t\t\t\tconsole.log('Pasted content: ', text);\n\t\t\t\tthis.build.importsmol(text);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error('Failed to read clipboard contents: ', err);\n\t\t\t});\n\t}\n\n}\n","\noptions {\n\n}\n\n\noptions button {\n  width: 50%;\n  height: 30px;\n}\n","<template>\n  <require from=\"./options.css\"></require>\n  <div>\n\n    <div class=\"d-flex\">\n      <!-- <button class=\" btn0\" onclick.call=\"import()\">Import</button> -->\n      <button class=\"btn0 mr-auto\" onclick.call=\"save()\">Save</button>\n      <button class=\"btn0\" onclick.call=\"reset()\">Reset</button>\n    </div>\n\n    <div class=\"d-flex\" style=\"flex-wrap: nowrap;\">\n      <!-- <button class=\"btn0\" onclick.call=\"export()\">Export</button> -->\n      <input class=\"mr-1\" type=\"text\" value.bind=\"copyUrl\" style=\"width: 100%; padding-left: 5px; height: 40px;\" ref=\"exportlink\">\n    </div>\n\n    <div class=\"d-flex\" style=\"flex-wrap: nowrap;\">\n      <input class=\"mr-1\" type=\"text\" value.bind=\"build.name\" style=\"width: 100%; padding-left: 5px; height: 40px;\">\n    </div>\n\n\n  </div>\n</template>\n","import { bindable } from 'aurelia-framework';\nimport { build } from '../build';\nimport { db } from '../../../db';\n\nexport class sets {\n\n\t@bindable public sets: any[];\n\n\tconstructor() {\n\t}\n\n\tattached() {\n\n\t}\n\n\n}\n","<template>\n  <div>\n\n    <!-- <h2>Sets</h2> -->\n\n    <div repeat.for=\"set of sets\">\n      <h5>${set.name}</h5>\n      <div repeat.for=\"stat of set.bonus.stats\">\n        ${stat.min} ${stat.name}\n      </div>\n    </div>\n\n  </div>\n</template>","export class spells {\n\n}\n","<template>\n\n  <!-- <h2>Spells</h2> -->\n\n</template>","import { bindable } from 'aurelia-framework';\nimport { db } from '../../../../db';\n\nexport class addedstats {\n\n\t// Static data\n\tpublic modsSections: Map<string, string[]>;\n\n\t// custom exos\n\t@bindable\n\tpublic stats: Map<string, number>;\n\n\tconstructor() {\n\t\tthis.modsSections = db.getStatNames();\n\t}\n\n\t/*\n\tpublic addStatMod(that, event, blockid: number) {\n\t\t// this.blocks[blockid].mods.push(new ModFilter());\n\t\tthis.stats.set(\"\", )\n\n\t\tlet ele: HTMLElement = event.target;\n\t\tconsole.log(\"addStatMod : \" + ele.parentElement.children.item(1));\n\n\t\t$(ele.parentElement.children.item(1)).show();\n\t\t// $(event.target).closest(\".searchable\").find(\"dl section dd\").show();\n\t\t// $(event.target).closest(\".searchable\").find(\"input\").focus();\n\t}\n\t*/\n\n\tpublic onModInputFocus(that, event, blockid, modid) {\n\t\tconsole.log(\"onFocusModInput [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\t$(event.target).closest(\".searchable\").find(\"dl\").show();\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd\").show();\n\t}\n\tpublic onModInputBlur(that, event, blockid, modid) {\n\t\tconsole.log(\"onModInputBlur [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\t// let that = this;\n\t\tsetTimeout(function() {\n\t\t\t$(event.target).closest(\".searchable\").find(\"dl\").hide();\n\t\t}, 300);\n\t}\n\tpublic oninput(that, event) {\n\t\tconsole.log(\"oninput : \" + that + \" - \" + event.target);\n\t\tconsole.log(\"blocks : \" + JSON.stringify(Array.from(this.stats.entries())));  //JSON.stringify(this.blocks[0]));\n\t}\n\tpublic onDDHover(that, event, blockid, modid, modname) {\n\t\tconsole.log(\"onDDHover : \" + JSON.stringify(Array.from(this.stats.entries())));  //JSON.stringify(this.blocks));\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd.selected\").removeClass(\"selected\");\n\t\t$(event.target).addClass(\"selected\");\n\t}\n\tpublic onDDClick(that, event, oldname, modname) {\n\t\tconsole.log(\"onDDClick : \" + event);\n\t\t// console.log(\"blocks : \" + JSON.stringify(filter.inst.blocks));\n\t\t// this is the DD list element\n\t\tlet ele: HTMLElement = event.target; //event.currentTarget;\n\n\t\t// if(!this.stats.has(modname)){\n\t\t// \t\t// si le mod n'existait pas avant, ça veut dire que c'est un nouveau\n\t\t// \t\t// donc on doit remettre un champs vide pour\n\t\t// }\n\n\t\t// this.blocks[blockid].mods[modid].name = modname;\n\t\tif (oldname == \"new\") {\n\t\t\tthis.stats.set(modname, 0);\n\t\t} else {\n\t\t\tlet oldval = this.stats.get(oldname);\n\t\t\tthis.stats.delete(oldname);\n\t\t\tthis.stats.set(modname, oldval);\n\t\t}\n\n\t\tlet input = $(ele).closest(\".searchable\").find(\"input\");\n\t\tinput.blur();\n\n\t\tconsole.log(\"blocks : \" + JSON.stringify(Array.from(this.stats.entries()))); //filter.inst.blocks[0]));\n\t}\n\n\n\n}\n","<template>\n  <!-- <require from=\"/src/pages/items/filter.less\"></require> -->\n  <require from=\"../../../items/filter.less\"></require>\n\n  <!-- <h2>Added Stats</h2> -->\n\n  <ul style=\"list-style-type: none; padding-left: 0px;\">\n\n    <li class=\"d-flex\" repeat.for=\"[name, val] of stats\" style=\"flex-wrap: nowrap;\">\n      <!-- <input type=\"text\" value.bind=\"name\" disabled class=\"mr-2\" /> -->\n      <div class=\"mr-auto\">${name}</div>\n      <input type=\"number\" value.bind=\"val\" disabled />\n      <!-- <button class=\"btnDelete\" onclick.call=\"deleteExo(name)\">x</button> -->\n    </li>\n\n    <!--\n    <li class=\"row\" repeat.for=\"[name, val] of stats\">\n      <div name=\"modsearch\" class=\"searchable\">\n        <input name=\"modsearchinput\" type=\"text\" autocomplete=\"off\" placeholder=\"+Add Stat Mod\" value.bind=\"name\" onkeyup.call=\"filterFunction2($this, $event)\" onchange.call=\"oninput($this, $event)\" onfocus.call=\"onModInputFocus($this, $event)\"\n          onblur.call=\"onModInputBlur($this, $event)\">\n        <dl name=\"modsearchlist\" class=\"modlist\">\n          <section repeat.for=\"[section, mods] of modsSections\">\n            <dt>${section}</dt>\n            <dd repeat.for=\"modname of mods\" onmouseover.call=\"onDDHover($this, $event, modname)\" onclick.call=\"onDDClick($this, $event, name, modname)\">${modname}</dd>\n          </section>\n        </dl>\n      </div>\n\n      <input id=\"exostat-${name}\" type=\"number\" value.bind=\"val\" />\n\n      <button class=\"btnDelete\" onclick.call=\"deleteExo(name)\">x</button>\n    </li>\n\n    <div name=\"modsearch\" class=\"searchable\">\n      <input name=\"modsearchinput\" type=\"text\" autocomplete=\"off\" placeholder=\"+Add Stat Mod\" onkeyup.call=\"filterFunction2($this, $event)\" onchange.call=\"oninput($this, $event)\" onfocus.call=\"onModInputFocus($this, $event)\"\n        onblur.call=\"onModInputBlur($this, $event)\">\n      <dl name=\"modsearchlist\" class=\"modlist\">\n        <section repeat.for=\"[section, mods] of modsSections\">\n          <dt>${section}</dt>\n          <dd repeat.for=\"modname of mods\" onmouseover.call=\"onDDHover($this, $event, modname)\" onclick.call=\"onDDClick($this, $event, 'new', modname)\">${modname}</dd>\n        </section>\n      </dl>\n    </div>\n    -->\n\n  </ul>\n\n  <!-- <button class=\"btnAdd\">Add Stat</button> -->\n\n</template>\n","import { bindable } from 'aurelia-framework';\nimport { build } from '../../build';\nimport { db } from '../../../../db';\n\nexport class basestats {\n\n\tpublic statnames: string[];\n\n\t@bindable public stats: Map<string, number>;\n\n\tconstructor() {\n\t\tthis.statnames = db.getBaseStatNames();\n\t}\n\n\tpublic onchange(name) {\n\t\t// console.log(\"onchange base stat : \" + JSON.stringify(name));\n\t\t// console.log(\"change : \" + name + \"=\" + value);\n\t\t// console.log(\"agi : \" + this.stats.get(\"Agilité\"));\n\n\t\t// var name = event.target.id;\n\n\t\tvar doc = document.getElementById(\"basestat-\" + name) as HTMLInputElement;\n\t\t// console.log(\"onchange base stat : \" + name + \"=\" + doc.valueAsNumber);\n\n\t\tbuild.setBaseStat(name, doc.valueAsNumber);\n\t\t// return true;\n\t}\n\n\n\t// public test() {\n\t// \tconsole.log(\"hi\");\n\t// }\n\n}\n","<template>\n  <!-- <h2>Base Stats</h2> -->\n\n  <ul style=\"list-style-type: none; padding-left: 0px;\">\n    <!-- <li repeat.for=\"line of data\"> -->\n    <li class=\"d-flex\" repeat.for=\"name of statnames\">\n      <!-- class=\"row\" -->\n      <!-- <div class=\"col-sm\">${stats[i].icon}</div> -->\n      <div class=\"mr-auto\">${name}</div>\n      <!-- <div class=\"col-sm\">${value}</div> -->\n      <!-- <input id=\"basestat-${name}\" type=\"number\" value.bind=\"value\" style=\"width: 50px;\" change.delegate=\"onchange(name, value)\" /> -->\n      <!-- onchange.call=\"onchange(name, value)\" -->\n      <!-- change.bind=\"onchange(name, value)\" /> -->\n\n      <input id=\"basestat-${name}\" type=\"number\" model.bind=\"stats.get(name)\" value=\"${stats.get(name)}\" onchange.call=\"onchange(name)\" />\n      <!-- value.bind=\"val\" -->\n\n      <!-- <input type=\"number\" oninput.call=\"test()\" /> -->\n\n      <!-- hidden div just to get the same spacing as addedstats.html -->\n      <!-- <div class=\"btnDelete\" style=\"visibility: hidden;\"></div> -->\n    </li>\n\n  </ul>\n\n</template>","import { bindable } from 'aurelia-framework';\nimport { db } from '../../../../db';\n\nexport class combatstats {\n\n\t// public keys: string[];\n\n\t@bindable\n\tpublic stats: Map<string, number>;\n\n\tconstructor() {\n\t\t// this.keys = db.getCombatStatsNames();\n\t\t// vita, pa/pm,\n\t\t// esquive pa/pm, tacle,\n\t\t// résists éléments fix/%\n\t\t// résists poussée/critique\n\t}\n\n\n\tpublic get elements(): string[] {\n\t\treturn db.getElementsNames();\n\t}\n\tpublic get combatkeys(): string[] {\n\t\treturn db.getCombatStatsNames();\n\t}\n\n\tpublic getIcon(mod): string {\n\t\treturn db.getIconStyle(mod);\n\t}\n\n}\n","\ncombatstats td {\n  /* text-align: right; */\n  /* padding-left: 15px !important; */\n  /* padding: 3px; */\n}\n","<template>\n  <require from=\"./combatstats.css\"></require>\n\n  <div style=\"width: 100%;\">\n    <!-- <h2>Combat Stats</h2> -->\n\n    <table class=\"table table-sm table-borderless\" style=\"color: var(--front0);\">\n      <colgroup>\n        <col style=\"width: 16.6666%;\">\n        <col style=\"width: 16.6666%;\">\n        <col style=\"width: 16.6666%;\">\n        <col style=\"width: 16.6666%;\">\n        <col style=\"width: 16.6666%;\">\n        <col style=\"width: 16.6666%;\">\n      </colgroup>\n      <tbody>\n        <tr>\n          <td>\n            <span style.bind=\"getIcon('Vie')\"></span>\n            ${stats.get('Vie') || 0}\n          </td>\n          <td repeat.for=\"key of combatkeys\">\n            <span style.bind=\"getIcon(key)\"></span>\n            ${stats.get(key) || 0}\n          </td>\n        </tr>\n        <tr>\n          <td>\n            <span style.bind=\"getIcon('PA')\"></span>\n            ${stats.get('PA') || 0}\n          </td>\n          <td repeat.for=\"key of elements\">\n            <span style.bind=\"getIcon(key)\" style=\"margin-top: 7px;\"></span>\n            <span>${stats.get(\"Résistance \" + key) || 0}</span>\n          </td>\n        </tr>\n        <tr>\n          <td>\n            <span style.bind=\"getIcon('PM')\"></span>\n            ${stats.get('PM') || 0}\n          </td>\n          <td repeat.for=\"key of elements\">\n            <span style.bind=\"getIcon(key)\"></span>\n            ${stats.get(\"% Résistance \" + key) || 0}%\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n  </div>\n</template>\n","import { bindable } from 'aurelia-framework';\nimport { db } from '../../../../db';\n\nexport class totalstats {\n\n\t@bindable public stats: Map<string, number>;\n\n\tpublic sections: Map<string, any>;\n\n\tconstructor() {\n\t\tthis.sections = db.getStatNames();\n\t\t// console.log(\"hello totals, sections : \" + JSON.stringify(Array.from(db.getStatNames().entries())));\n\t}\n\n\tpublic get(name) {\n\t\tif (this.stats.has(name))\n\t\t\treturn this.stats.get(name);\n\t\telse\n\t\t\treturn 0;\n\t}\n\n\tpublic getIcon(mod): string {\n\t\treturn db.getIconStyle(mod);\n\t}\n\n\n\t// public get sections() {\n\t// \treturn db.getStatNames();\n\t// }\n\n\n}\n","\n\n\ntotalstats table {\n  background-color: var(--bg0) !important;\n}\n\n.table-dark.table-striped tbody tr:nth-of-type(odd) {\n   color: var(--accent1);\n    /* opacity: 0.05; */\n    /* background-color: rgba(1,255,255,.05) !important; */\n}\n","<template>\n  <require from=\"./totalstats.css\"></require>\n\n  <!-- <h2>Total Stats</h2> -->\n\n  <table class=\"table table-sm table-striped table-borderless table-dark\" repeat.for=\"[section, mods] of sections\">\n    <thead>\n      <th>${section}</th>\n      <th></th>\n    </thead>\n    <tbody>\n      <tr repeat.for=\"name of mods\">\n        <td>\n          <span style.bind=\"getIcon(name)\"></span>\n          ${name}\n        </td>\n        <td style=\"text-align: right;\" innerHtml.bind=\"stats.get(name) || 0\"></td>\n        <!-- <td if.bind=\"stats\" style=\"text-align: right;\" innerHtml.bind=\"stats.get(name) || 0\"></td> -->\n        <!-- <td if.bind=\"stats == null\" style=\"text-align: right;\" innerHtml.bind=\"stats.get(name) || 0\"></td> -->\n      </tr>\n    </tbody>\n  </table>\n\n</template>\n","import { bindable } from 'aurelia-framework';\nimport { build } from '../build';\nimport { db } from '../../../db';\n\nexport class damage {\n\tpublic name: string = \"\";\n\tpublic min: number = 0;\n\tpublic max: number = 0;\n\tpublic minCrit: number = 0;\n\tpublic maxCrit: number = 0;\n}\n\n\nexport class weapon {\n\n\t@bindable\n\tpublic data: build;\n\n\tpublic item: any;\n\tpublic damages: damage[];\n\tpublic total: damage;\n\n\tpublic constructor() {\n\n\t}\n\n\tpublic attached() {\n\t\tthis.item = this.data.items.get(\"Arme\");\n\t\tif (this.hasWeapon) this.calculate();\n\t}\n\n\tpublic get hasWeapon(): boolean {\n\t\treturn this.data.items.has(\"Arme\");\n\t}\n\n\tpublic get characteristics() {\n\t\treturn db.getWeaponCharacteristics();\n\t}\n\n\tpublic getImgUrl() {\n\t\treturn db.getImgUrl(this.item);\n\t}\n\n\tpublic calculate() {\n\t\tthis.damages = [];\n\t\tlet stats: any[] = this.item.statistics;\n\t\tlet mods = stats.filter(obj => {\n\t\t\treturn obj.name.startsWith(\"(dommages \") || obj.name.startsWith(\"(vol \");\n\t\t});\n\t\tlet dmgCrit = 0;\n\t\tlet crit = 0;\n\t\tlet cc: string = this.item.characteristics[2][\"CC\"] || \"\";\n\t\tif (cc) {\n\t\t\t// let critvars = cc.split(\" \");\n\t\t\t// crit = critvars[0];\n\t\t\tlet dmgcrit0 = cc.split(\"+\")[1];\n\t\t\tdmgCrit = parseInt(dmgcrit0.substring(0, dmgcrit0.length - 1));\n\t\t\t// console.log(\"dmg crit : \" + dmgCrit);\n\t\t}\n\n\t\tmods.forEach(mod => {\n\t\t\tlet name: string = mod.name;\n\t\t\tlet val = 0;\n\t\t\tlet ele = \"\";\n\t\t\tlet d = \"\";\n\t\t\tif (mod.name.includes(\"dommages Neutre\")) {\n\t\t\t\tele = \"Force\";\n\t\t\t\td = \"Neutre\";\n\t\t\t} else if (mod.name.includes(\"dommages\") || mod.name.includes(\"vol\")) {\n\t\t\t\tele = name.split(\" \")[1];\n\t\t\t\tele = ele.substr(0, ele.length - 1);\n\t\t\t\td = \"Dommages \" + ele;\n\t\t\t\tele = db.getStatByElement(ele);\n\t\t\t} else if (mod.name.includes(\"soin\")) {\n\t\t\t}\n\n\t\t\tlet dmg = new damage();\n\t\t\tdmg.min = this.formula(mod.min, ele, d);\n\t\t\tdmg.max = this.formula(mod.max, ele, d);\n\t\t\tdmg.name = mod.name;\n\n\t\t\tdmg.minCrit = this.formula(mod.min + dmgCrit, ele, d);\n\t\t\tdmg.maxCrit = this.formula(mod.max + dmgCrit, ele, d);\n\n\t\t\t// console.log(\"dmg : \" + JSON.stringify(dmg));\n\n\t\t\tthis.damages.push(dmg);\n\t\t});\n\n\t\tthis.total = new damage();\n\t\tthis.damages.forEach(d => {\n\t\t\tthis.total.min += d.min;\n\t\t\tthis.total.max += d.max;\n\t\t\tthis.total.minCrit += d.minCrit;\n\t\t\tthis.total.maxCrit += d.maxCrit;\n\t\t})\n\t}\n\n\tpublic formula(base: number, ele: string, d: string) {\n\t\tlet stat = this.data.stats.get(ele) || 0;\n\t\tlet pui = this.data.stats.get(\"Puissance\") || 0;\n\t\tlet dom = this.data.stats.get(d) || 0;\n\t\tlet dom2 = this.data.stats.get(\"Dommages\") || 0;\n\t\tlet weapondmg = this.data.stats.get(\"% Dommages d'armes\") || 0;\n\n\t\t// console.log(\"formula (\" + ele + \":\" + stat + \") \");\n\t\t// console.log(\"pui : \" + pui);\n\t\t// console.log(\"dom : \" + dom);\n\t\t// console.log(\"dom2 : \" + dom2);\n\t\t// console.log(\"weapondmg : \" + weapondmg);\n\n\t\tlet dmg = base\n\t\t\t* ((100 + stat + pui) / 100)\n\t\t\t+ (dom + dom2);\n\t\tdmg = dmg * ((100 + weapondmg) / 100);\n\t\treturn Math.floor(dmg);\n\t}\n\n}\n","<template>\n  <div style=\"margin-top: 10px;\">\n    <!-- <h6></h6> -->\n    <div if.bind=\"hasWeapon\">\n      <!-- weapon info -->\n      <div class=\"title d-flex flex-nowrap\">\n        <!-- Name and level -->\n        <div class=\"title d-flex flex-nowrap mr-3\">\n          <img src=\"${getImgUrl()}\" width=\"60px\" height=\"60px\">\n          <!-- <div>\n            <span>${item.name}</span><br>\n            <span>${item.level}</span>\n          </div> -->\n        </div>\n        <!-- characteristics -->\n        <div>\n          <div>\n            <span>PA :</span>\n            <span>${item.characteristics[0][\"PA\"]}</span>\n          </div>\n          <div>\n            <span>Portée :</span>\n            <span>${item.characteristics[1][\"Portée\"]}</span>\n          </div>\n          <div>\n            <span>CC :</span>\n            <span>${item.characteristics[2][\"CC\"]}</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- dmg -->\n      <div>\n        <div>Total : ${total.min} à ${total.max} (${total.minCrit} à ${total.maxCrit})</div>\n        <div repeat.for=\"dmg of damages\">${dmg.name} : ${dmg.min} à ${dmg.max} (${dmg.minCrit} à ${dmg.maxCrit})</div>\n      </div>\n    </div>\n\n\n  </div>\n</template>","import { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\nimport { build } from '../build/build';\n\n@inject(Router)\nexport class builds {\n\n\tpublic static inst;\n\tpublic names: string[] = [];\n\n\tpublic router: Router;\n\n\tconstructor(router: Router) {\n\t\tthis.router = router;\n\t\tbuilds.inst = this;\n\t\t// init localStorage\n\t\tif (!localStorage.getItem(\"builds\")) {\n\t\t\tlocalStorage.setItem(\"builds\", JSON.stringify(this.names));\n\t\t}\n\t\t// load build names\n\t\tthis.names = JSON.parse(localStorage.getItem(\"builds\"));\n\t}\n\n\tpublic newbuild() {\n\t\t// build.inst.clear(true);\n\t\tif (!build.inst) {\n\t\t\twindow.setTimeout(() => build.import(null), 300);\n\t\t} else {\n\t\t\tbuild.import(null);\n\t\t}\n\t\tthis.router.navigate(\"/build\");\n\t}\n\n\tpublic delete(name: string) {\n\t\tvar names = this.names; //JSON.parse(localStorage.getItem(\"builds\"));\n\t\tvar index: number = this.names.indexOf(name);\n\t\tif (index != -1) {\n\t\t\tnames.splice(index, 1);\n\t\t\tlocalStorage.setItem(\"builds\", JSON.stringify(names));\n\t\t\tlocalStorage.removeItem(name);\n\t\t\t// console.log(\"deleted build : \" + name);\n\t\t}\n\t}\n\n\tpublic load(name: string) {\n\t\t// console.log(\"load build : {\" + name + \"} from [\" + this.names + \"]\");\n\t\tif (this.names.indexOf(name) != -1) {\n\n\t\t\tlet json = localStorage.getItem(name);\n\t\t\tbuild.import(json);\n\t\t\t// console.log(\"load build : \" + JSON.stringify(obj));\n\t\t\t// build.load(obj);\n\t\t\tthis.router.navigate(\"/build\");\n\t\t}\n\t}\n\n\tpublic static save(build: build) {\n\t\tvar names = [];\n\t\tif (builds.inst == null) names = JSON.parse(localStorage.getItem(\"builds\"));\n\t\tnames = JSON.parse(localStorage.getItem(\"builds\"));\n\t\tif (names.indexOf(build.name) == -1) {\n\t\t\tnames.push(build.name);\n\t\t}\n\t\tlocalStorage.setItem(\"builds\", JSON.stringify(names));\n\t\tlocalStorage.setItem(build.name, build.export());\n\t}\n\n\n\n}\n","\n#buildscontainer {\n  width: 72%;\n  margin-left: 15%;\n}\n\n#buildsearch {\n  /* margin: 0 auto; */\n  /* margin-left: 15%; */\n  /* width: 70%; */\n  width: 100%;\n  margin-left: 1%;\n  margin-bottom: 1%;\n  height: 40px;\n}\n\n.builds {\n  --buildaccent: var(--accent1);\n  --buildaccenthover: var(--accent0);\n  width: 102%;\n  /* margin: 0 auto; */\n  /* margin-left: 14.5%; */\n  /* width: 71%; */\n  flex-wrap: wrap;\n}\n\n  .builds .build {\n    /* width: 200px; */\n    width: 18%;\n    height: 100px;\n    margin: 1%;\n    /* margin: 5px; */\n    padding: 5px;\n    /* border: 1px solid transparent; */\n    border: 1px solid var(--buildaccent);\n    /* background: var(--accent1); */\n  }\n  .builds .build:hover {\n    border: 1px solid var(--accent0);\n  }\n  .builds .build:hover h3 {\n    color: var(--buildaccenthover);\n  }\n    .builds .build h3 {\n      cursor: pointer;\n      width: 100%;\n      color: var(--buildaccent);\n    }\n    .builds .build button {\n      width: 38px;\n      height: 30px;\n      background: var(--bg0);\n      border: 1px solid transparent;\n      color: var(--buildaccent);\n    }\n\n    .builds .build button:hover {\n      background: var(--buildaccent);\n      color: var(--bg0);\n    }\n","<template>\n  <require from=\"./builds.css\"></require>\n  <!-- view container -->\n  <div id=\"buildscontainer\">\n    <!-- search -->\n    <input id=\"buildsearch\" type=\"text\" value=\"\" placeholder=\"search...\" autofocus>\n    <!-- builds grid -->\n    <div class=\"builds d-flex\">\n      <!-- new build -->\n      <div class=\"build d-flex\">\n        <h3 class=\"\" onclick.call=\"newbuild()\">New Build</h3>\n      </div>\n      <!-- saved builds -->\n      <div class=\"build d-flex\" repeat.for=\"name of names\">\n        <h3 class=\"\" onclick.call=\"load(name)\">${name}</h3>\n        <button onclick.call=\"delete(name)\">X</button>\n      </div>\n    </div>\n  </div>\n\n</template>\n","import { inject, bindable, View, observable } from 'aurelia-framework';\nimport { itemsearch } from './itemsearch';\nimport { db } from '../../db';\nimport * as $ from 'jquery';\n\nexport class filter {\n\n\tpublic static inst: filter;\n\n\t// Static data\n\tpublic modsSections: Map<string, string[]>;\n\tpublic styleChecked: any;\n\tpublic styleUnchecked: any;\n\n\t// custom filter data\n\tpublic filterText: string = \"\";\n\tpublic levelMin: number = 0;\n\tpublic levelMax: number = 200;\n\tpublic types: Map<string, boolean>;\n\tpublic armes: Map<string, boolean>;\n\tpublic filterLevel: boolean = true;\n\t@observable({ changeHandler: 'filterTypeChanged' })\n\tpublic filterType: boolean = false;\n\t@observable({ changeHandler: 'filterWeaponChanged' })\n\tpublic filterWeapon: boolean = false;\n\t// mods blocks\n\tpublic blocks: BlockFilter[];\n\n\t// html elements\n\tpublic blocklist: HTMLDivElement;\n\t// public modsearch: any;\n\t// public modsearchinput: any;\n\t// public modsearchlist: any;\n\n\tconstructor() {\n\t\tfilter.inst = this;\n\n\t\tthis.modsSections = new Map<string, string[]>();\n\t\tthis.modsSections.set(\"Pseudo\", [\n\t\t\t\"(Pseudo) # res\",\n\t\t\t\"(Pseudo) # res élémentaires\",\n\t\t\t\"(Pseudo) Total #% res\",\n\t\t\t\"(Pseudo) Total #% res élémentaires\",\n\t\t]);\n\t\tdb.getStatNames().forEach((v, k) => {\n\t\t\tthis.modsSections.set(k, v);\n\t\t});\n\n\t\tthis.types = new Map<string, boolean>();\n\t\tthis.armes = new Map<string, boolean>();\n\t\t(db.getItemsTypes().concat(db.getPetTypes())).forEach(s => {\n\t\t\tthis.types.set(s, false);\n\t\t});\n\t\tdb.getWeaponsTypes().forEach(s => {\n\t\t\tthis.armes.set(s, false);\n\t\t});\n\n\t\tthis.styleChecked = {\n\t\t\tcolor: \"var(--front1)\",\n\t\t\tbackground: \"var(--accent1)\",\n\t\t};\n\t\tthis.styleUnchecked = {\n\t\t\tcolor: \"var(--front0)\",\n\t\t\tbackground: \"transparent\",\n\t\t};\n\n\t\tthis.blocks = [];\n\t\tthis.addBlock();\n\t\tthis.loadFilter();\n\n\t\tthis.search();\n\n\t\t// console.log(\"blocks : \" + JSON.stringify(this.blocks[0]));\n\t}\n\n\tpublic created(owningView: View, myView: View) {\n\t}\n\tpublic bind(bindingContext: Object, overrideContext: Object) {\n\t\t// console.log(\"bind blocklist : \" + this.blocklist);\n\t}\n\tpublic attached() {\n\t\twindow.addEventListener('keypress', this.handleKeyInput, false);\n\t}\n\tpublic detached() {\n\t\twindow.removeEventListener('keypress', this.handleKeyInput);\n\t}\n\tpublic unbind() {\n\t}\n\n\tpublic handleKeyInput = (event) => {\n\t\tif (event.key == \"Enter\") this.search();\n\t}\n\n\tpublic search() {\n\t\titemsearch.inst.search(this);\n\t\tthis.saveFilter();\n\t}\n\n\tpublic loadFilter() {\n\t\tlet json = localStorage.getItem(\"filter\");\n\t\tif (json) {\n\t\t\tlet data = JSON.parse(json);\n\t\t\tthis.filterLevel = data.filterLevel;\n\t\t\tthis.filterText = data.filterText;\n\t\t\tthis.levelMin = data.levelMin;\n\t\t\tthis.levelMax = data.levelMax;\n\t\t\tthis.types = new Map<string, boolean>(data.types);\n\t\t\tthis.armes = new Map<string, boolean>(data.armes);\n\t\t\tthis.filterLevel = data.filterLevel;\n\t\t\tthis.filterType = data.filterType;\n\t\t\tthis.filterWeapon = data.filterWeapon;\n\t\t\tthis.blocks = data.blocks;\n\t\t}\n\t}\n\tpublic saveFilter() {\n\t\tlet obj = {\n\t\t\tfilterText: this.filterText,\n\t\t\tlevelMin: this.levelMin,\n\t\t\tlevelMax: this.levelMax,\n\t\t\ttypes: Array.from(this.types.entries()),\n\t\t\tarmes: Array.from(this.armes.entries()),\n\t\t\tfilterLevel: this.filterLevel,\n\t\t\tfilterType: this.filterType,\n\t\t\tfilterWeapon: this.filterWeapon,\n\t\t\tblocks: this.blocks\n\t\t};\n\t\tlocalStorage.setItem(\"filter\", JSON.stringify(obj));\n\t}\n\n\tpublic setBlock(blockIndex: number, type: string, args: number[]) {\n\t\t// args would be like min/max if the type is Sum\n\t\tthis.blocks[blockIndex].type = type;\n\t\tthis.blocks[blockIndex].min = args[0];\n\t\tthis.blocks[blockIndex].max = args[1];\n\t\tthis.blocks[blockIndex].activate = true;\n\t\tthis.blocks[blockIndex].mods = [];\n\t}\n\tpublic deleteBlock(blockIndex: number) {\n\t\tthis.blocks.splice(blockIndex, 1);\n\t}\n\n\tpublic setMod(blockIndex: number, mod: string, args: number[]) {\n\t\t// if (!this.blocks[blockIndex].mods.has(mod)) {\n\t\t// \tthis.blocks[blockIndex].mods.set(mod, {});\n\t\t// }\n\n\t\tlet m = this.blocks[blockIndex].mods.find(e => e.name == mod);\n\t\tif (!m) {\n\t\t\tm = new ModFilter();\n\t\t\tthis.blocks[blockIndex].mods.push(m); //mod, args[0], args[1], true));\n\t\t}\n\t\t// else {\n\t\t// args would be min/max normally\n\t\tm.name = mod\n\t\tif (args.length > 0) m.min = args[0];\n\t\tif (args.length > 1) m.max = args[1];\n\t\tm.activate = true;\n\t\t// }\n\t}\n\tpublic deleteMod(blockIndex: number, mod: string) {\n\t\t// this.blocks[blockIndex].mods.delete(mod);\n\t\tlet m = this.blocks[blockIndex].mods.find(e => e.name == mod);\n\t\tif (m) {\n\t\t\tlet i = this.blocks[blockIndex].mods.indexOf(m);\n\t\t\tthis.blocks[blockIndex].mods.splice(i, 1);\n\t\t}\n\t}\n\n\tpublic filterTypeClicked() {\n\t\tvar activated = this.filterType;\n\t\tthis.types.forEach((value, key) => this.types.set(key, !activated));\n\t}\n\tpublic checkType(type) {\n\t\tvar activated = this.types.get(type);\n\t\tthis.types.set(type, !activated);\n\t\tthis.filterType = this.hasValue(this.types, true);\n\t}\n\tpublic filterWeaponClicked() {\n\t\tvar activated = this.filterWeapon;\n\t\tthis.armes.forEach((value, key) => this.armes.set(key, !activated));\n\t}\n\tpublic checkWeapon(arme) {\n\t\tthis.armes.set(arme, !this.armes.get(arme));\n\t\tthis.filterWeapon = this.hasValue(this.armes, true);\n\t}\n\n\n\tprivate hasValue(map: Map<string, boolean>, value: boolean) {\n\t\tfor (const [key, val] of Array.from(map.entries())) {\n\t\t\tif (val == value) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/* When the user clicks on the button,\n\ttoggle between hiding and showing the dropdown content */\n\tpublic myFunction() {\n\t\tdocument.getElementById(\"myDropdown\").classList.toggle(\"show\");\n\t}\n\tpublic filterFunction() {\n\t\tvar input, filter, ul, li, a, i;\n\t\tinput = document.getElementById(\"myInput\");\n\t\tfilter = input.value.toUpperCase();\n\t\tvar div = document.getElementById(\"myDropdown\");\n\t\ta = div.getElementsByTagName(\"a\");\n\t\tfor (i = 0; i < a.length; i++) {\n\t\t\tvar txtValue = a[i].textContent || a[i].innerText;\n\t\t\tif (txtValue.toUpperCase().indexOf(filter) > -1) {\n\t\t\t\ta[i].style.display = \"\";\n\t\t\t} else {\n\t\t\t\ta[i].style.display = \"none\";\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\n\n\tpublic filterFunction2(that, event) {\n\t\t// console.log(\"filter that : \" + event.target);\n\t\tlet container, input, filter, li, input_val;\n\t\tcontainer = $(event.target).closest(\"searchable\");\n\t\tinput = container.find(\"input\");\n\t\t// console.log(\"filter input : \" + input + \", val : \" + input.val());\n\t\tinput_val = input.val() + \"\";\n\t\tif (input_val == \"undefined\") input_val = \"\";\n\t\tinput_val = input_val.toUpperCase();\n\t\tif ([\"ArrowDown\", \"ArrowUp\", \"Enter\"].indexOf(event.key) != -1) {\n\t\t\tthis.keyControl(event, container)\n\t\t} else {\n\t\t\tli = container.find(\"dl dd\");\n\t\t\tli.each(function(i, obj) {\n\t\t\t\tif ($(this).text().toUpperCase().indexOf(input_val) > -1) {\n\t\t\t\t\t$(this).show();\n\t\t\t\t} else {\n\t\t\t\t\t$(this).hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find(\"dl dd\").removeClass(\"selected\");\n\t\t\tsetTimeout(function() {\n\t\t\t\tcontainer.find(\"dl dd:visible\").first().addClass(\"selected\");\n\t\t\t}, 100)\n\t\t}\n\t}\n\tpublic keyControl(e, container) {\n\t\tif (e.key == \"ArrowDown\") {\n\t\t\tif (container.find(\"dl dd\").hasClass(\"selected\")) {\n\t\t\t\tif (container.find(\"dl dd:visible\").index(container.find(\"dl dd.selected\")) + 1 < container.find(\"dl dd:visible\").length) {\n\t\t\t\t\tcontainer.find(\"dl dd.selected\").removeClass(\"selected\").nextAll().not('[style*=\"display: none\"]').first().addClass(\"selected\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet dd = container.find(\"dl dd:first-child\");\n\t\t\t\t// console.log(\"first dd : \" + dd.html());\n\t\t\t\tcontainer.find(\"dl dd:first-child\").addClass(\"selected\");\n\t\t\t}\n\t\t} else if (e.key == \"ArrowUp\") {\n\t\t\tif (container.find(\"dl dd:visible\").index(container.find(\"dl dd.selected\")) > 0) {\n\t\t\t\tcontainer.find(\"dl dd.selected\").removeClass(\"selected\").prevAll().not('[style*=\"display: none\"]').first().addClass(\"selected\");\n\t\t\t}\n\t\t} else if (e.key == \"Enter\") {\n\t\t\tcontainer.find(\"input\").val(container.find(\"dl dd.selected\").text()).blur();\n\t\t\tthis.onSelect(container.find(\"dl dd.selected\").text())\n\t\t}\n\t\tlet selectedDD = container.find(\"dl dd.selected\")[0];\n\t\t// console.log(\"selectedDD \" + selectedDD);\n\t\tif (selectedDD) {\n\t\t\t// selectedDD.scrollIntoView({\n\t\t\t// \tbehavior: \"smooth\",\n\t\t\t// });\n\t\t}\n\t}\n\n\tpublic onSelect(val) {\n\t\t// alert(val)\n\t}\n\n\n\n\n\n\tpublic addBlock() {\n\t\tthis.blocks.push({\n\t\t\ttype: \"$and\",\n\t\t\tmin: 0,\n\t\t\tmax: 0,\n\t\t\tmods: [new ModFilter()], //new Map<string, any>(),\n\t\t\tactivate: true,\n\t\t});\n\t}\n\tpublic addStatMod(that, event, blockid: number) {\n\t\tthis.blocks[blockid].mods.push(new ModFilter());\n\n\t\tlet ele: HTMLElement = event.target;\n\t\t// console.log(\"addStatMod : \" + ele.parentElement.children.item(1));\n\n\t\t$(ele.parentElement.children.item(1)).show();\n\t\t// $(event.target).closest(\".searchable\").find(\"dl section dd\").show();\n\t\t// $(event.target).closest(\".searchable\").find(\"input\").focus();\n\t}\n\tpublic onModInputFocus(that, event, blockid, modid) {\n\t\t// console.log(\"onFocusModInput [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\t$(event.target).closest(\".searchable\").find(\"dl\").show();\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd\").show();\n\t}\n\tpublic onModInputBlur(that, event, blockid, modid) {\n\t\t// console.log(\"onModInputBlur [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\t// let that = this;\n\t\tsetTimeout(function() {\n\t\t\t$(event.target).closest(\".searchable\").find(\"dl\").hide();\n\t\t}, 300);\n\t}\n\tpublic oninput(that, event) {\n\t\t// console.log(\"oninput : \" + that + \" - \" + event.target);\n\t\t// console.log(\"blocks : \" + JSON.stringify(this.blocks[0]));\n\t}\n\tpublic onDDHover(that, event, blockid, modid, modname) {\n\t\t// console.log(\"onHover : \" + JSON.stringify(this.blocks));\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd.selected\").removeClass(\"selected\");\n\t\t$(event.target).addClass(\"selected\");\n\t}\n\tpublic onDDClick(that, event, blockid, modid, modname) {\n\t\t// console.log(\"onDDClick : \" + event);\n\t\t// console.log(\"blocks : \" + JSON.stringify(filter.inst.blocks));\n\t\t// this is the DD list element\n\t\tlet ele: HTMLElement = event.target; //event.currentTarget;\n\n\t\t// let modelement = ele.parentElement.parentElement.parentElement;\n\t\t// let blockelement = modelement.parentElement;\n\n\t\t// let oldmod = ele.parentElement.parentElement.parentElement.id;\n\t\t// let blockId = Number.parseInt(ele.parentElement.parentElement.parentElement.parentElement.id);\n\t\t// this.setMod(blockId, ele.innerHTML, []);\n\t\t// let blockid = Number.parseInt(blockelement.id);\n\t\t// let modid = modelement.id;\n\n\t\tthis.blocks[blockid].mods[modid].name = modname; //$(ele).text();\n\n\t\t// let val = $(ele).text(); // ele.innerHTML\n\t\t// this.onSelect(val);\n\n\t\tlet input = $(ele).closest(\".searchable\").find(\"input\");\n\t\tinput.blur();\n\t\t// let modlist = ele.parentElement;\n\t\t// modlist.blur();\n\n\t\t// input.val(val).blur();\n\t\t// let inp: HTMLInputElement = input.va\n\n\t\t// $(this).closest(\".searchable\").find(\"input\").val($(this).text()).blur();\n\t\t// this.onSelect($(this).text())\n\n\t\t// console.log(\"blocks : \" + JSON.stringify(filter.inst.blocks[0]));\n\t}\n\n\n\n}\n\n\n\nexport class BlockFilter {\n\tpublic type: string = \"And\";\n\tpublic min: number;\n\tpublic max: number;\n\tpublic activate: boolean = true;\n\tpublic mods: ModFilter[] = [];\n\tpublic constructor() {\n\t}\n\t// public constructor(type: string, min: number, max: number, activate: boolean, mods?: ModFilter[]) {\n\t// }\n}\n\nexport class ModFilter {\n\tpublic name: string;\n\tpublic min: number;\n\tpublic max: number;\n\tpublic activate: boolean = true;\n\tpublic constructor() {\n\t}\n\t// public constructor(name: string, min: number, max: number, activate: boolean) {\n\t// \tif(name) this.name = name;\n\t// \tif(min)this.min = min;\n\t// \tif(max)this.max = max;\n\t// \tif(activate)this.activate = activate;\n\t// }\n}\n",".searchable {\n  width: 100%;\n  // width: 300px;\n  float: left;\n  // margin: 0 15px;\n}\n\n.searchable input {\n    width: 100%;\n    // height: 40px;\n    // font-size: 18px;\n    // padding: 10px;\n    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */\n    -moz-box-sizing: border-box; /* Firefox, other Gecko */\n    box-sizing: border-box; /* Opera/IE 8+ */\n    display: block;\n    // font-weight: 400;\n    // line-height: 1.6;\n    // color: #495057;\n    // background-color: #fff;\n    background-clip: padding-box;\n    border: 1px solid  var(--accent1);\n    // border-radius: .25rem;\n    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;\n    // background: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\") no-repeat right .75rem center/8px 10px;\n}\n\n.searchable dl {\n  width: 100%;\n  // float:left;\n  position:absolute;\n  display: none;\n  list-style-type: none;\n  // background-color: #fff;\n  // border-radius: 0 0 5px 5px;\n  border: 1px solid var(--accent1);\n  border-top: none;\n  max-height: 380px;\n  margin: 0;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  padding: 0;\n  background-color: var(--bg0);\n  z-index: 3;\n}\n\n.searchable dl dt {\n  // color: var(--accent1);\n  height: 25px;\n  // border-bottom: 1px solid #e1e1e1;\n  color: var(--front0);\n  background-color: var(--bg1);\n  z-index: 4;\n}\n.searchable dl dd {\n  height: 25px;\n  // padding: 7px 9px;\n  // border-bottom: 1px solid #e1e1e1;\n  cursor: pointer;\n  // color: #6e6e6e;\n  color: var(--front0);\n  background-color: var(--bg0);\n  z-index: 4;\n  margin: 0px;\n}\n\n.searchable dl dd.selected {\n    background-color: #e8e8e8;\n    color: #333;\n}\n\n\nfilter {\n\n}\n\nfilter>div {\n  /* width: 1200px; */\n  /* height: 300px; */\n  /* background: white; */\n  /* border: 1px solid var(--accent1); */\n  max-width: 85% !important;\n}\n\n/* Search bar */\nfilter .search {\n  width: 100%;\n  height: 40px;\n  padding-left: 5px;\n}\n\n\n/* Toggle button */\nfilter .toggle {\n  border: 1px solid var(--accent1);\n  background: transparent;\n  margin-bottom: 4px;\n  margin-right: 4px;\n  padding: 2px;\n  cursor: pointer;\n  text-align: center;\n  min-width: 50px;\n  height: 35px;\n}\nfilter .toggle label {\n  cursor: pointer;\n  margin: 0px;\n}\n\n/* Checkbox input */\nfilter input[type=\"checkbox\"] {\n  appearance: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n}\nfilter .checkbox {\n  width: 15px;\n  height: 15px;\n  background: var(--bg0);\n  border: 1px solid var(--accent1);\n  padding: 2px;\n}\nfilter .checkbox:checked {\n  background: var(--accent1);\n}\n\n\n/* title labels */\nfilter .title {\n  font-size: 25px;\n  font-weight: bold;\n  /* margin-left: 5px; */\n}\n\n/* block list */\nfilter .blocklist {\n\n}\nfilter .blocklist .block {\n  margin-bottom: 10px;\n}\nfilter .blocklist .block .blocktitle {\n  font-size: 20px;\n  color: var(--front0);\n  background: var(--bg0);\n  border-color: var(--bg0);\n  width: 100%;\n  /* margin-left: 5px; */\n  /* font-weight: bold; */\n}\nfilter .blocklist .block .blocktitle:focus {\n  border-color: var(--bg0) !important;\n}\nfilter .blocklist .block .mod {\n  margin-bottom: 10px;\n}\nfilter .blocklist .block .mod label {\n  background: var(--bg1);\n  width: 65%;\n  /* margin-left: 5px;\n  margin-right: 5px; */\n  margin-bottom: 0px\n  /* background: var(--bg1); */\n  /* font-size: 20px; */\n  /* font-weight: bold; */\n}\n\nfilter .btnAdd {\n  width: 100%;\n}\n\n/* left side */\n.leftside {\n  padding-left: 1px;\n}\n/* right side */\n.rightside {\n  padding-right: 1px;\n}\n","<template>\n  <require from=\"./filter.less\"></require>\n\n  <!-- <link href=\"https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css\" rel=\"stylesheet\" />\n  <script src=\"https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js\"></script> -->\n\n  <div class=\"container\">\n\n    <!-- Search -->\n    <div class=\"row\">\n      <input class=\"search\" type=\"text\" value.bind=\"filterText\" placeholder=\"search...\" focus=\"true\" />\n    </div>\n\n    <!-- tagify search box ? = search sur item names, panoplies, effets, types d'items (capecoiffe..).... -->\n    <!-- exemple tu clic sur [() Agilité ] et ça remplace le text par 2 box min/max à côté de l'icône d'agi -->\n\n    <div class=\"row\">\n      <!--Generic filters left side -->\n      <div class=\"leftside col\">\n\n        <!-- Level -->\n        <div class=\"d-flex align-items-center\">\n          <input class=\"checkbox mr-1\" type=\"checkbox\" id=\"level\" checked.bind=\"filterLevel\" />\n          <label class=\"title mr-auto\" for=\"level\">Level</label>\n          <input class=\"mr-2\" type=\"number\" value.bind=\"levelMin\" placeholder=\"min\" />\n          <input class=\"\" type=\"number\" value.bind=\"levelMax\" placeholder=\"max\" />\n        </div>\n\n        <!-- Types base -->\n        <input class=\"checkbox\" type=\"checkbox\" id=\"type\" checked.bind=\"filterType\" onclick.call=\"filterTypeClicked()\" />\n        <label class=\"title\" for=\"type\">Type</label>\n        <div class=\"d-flex flex-wrap\">\n          <div class=\"toggle\" repeat.for=\"[type, value] of types\" onclick.call=\"checkType(type)\" style.bind=\"value ? styleChecked : styleUnchecked\">\n            <!-- <input type=\"checkbox\" id=\"${type}\" value=\"type\" checked /> -->\n            <label for=\"${type}\" innerHTML.bind=\"type\"></label>\n          </div>\n        </div>\n\n        <!-- Types weapons -->\n        <input class=\"checkbox\" type=\"checkbox\" id=\"armes\" checked.bind=\"filterWeapon\" onclick.call=\"filterWeaponClicked()\" />\n        <label class=\"title\" for=\"armes\">Armes</label>\n        <div class=\"d-flex flex-wrap\">\n          <div class=\"toggle\" repeat.for=\"[arme, value] of armes\" onclick.call=\"checkWeapon(arme)\" style.bind=\"value ? styleChecked : styleUnchecked\">\n            <!-- <input type=\"checkbox\" id=\"${arme}\" value=\"arme\" checked /> -->\n            <label for=\"${arme}\" innerHTML.bind=\"arme\"></label>\n          </div>\n        </div>\n      </div>\n\n      <!-- Mods -->\n      <div class=\"rightside col\">\n        <!-- Mods -->\n        <input class=\"checkbox\" type=\"checkbox\" id=\"mods\" checked />\n        <label class=\"title\" for=\"mods\">Mods</label>\n        <div class=\"blocklist\" ref=\"blocklist\">\n          <!-- block list  -->\n          <div class=\"block\" repeat.for=\"i of blocks.length\" id.bind=\"i\">\n            <!-- block properties -->\n            <div class=\"d-flex align-items-center\">\n              <input class=\"checkbox mr-1\" type=\"checkbox\" id=\"${i}\" checked.bind=\"blocks[i].activate\" />\n              <select class=\"mr-auto blocktitle\" name=\"type\" value.bind=\"blocks[i].type\">\n                <option value=\"$and\">And</option>\n                <option value=\"$or\">Or</option>\n                <option value=\"$nor\">Not</option>\n                <option value=\"$sum\">Sum</option>\n              </select>\n              <!-- <label class=\"mr-auto blocktitle\" for=\"${i}\">${blocks[i].type}</label> -->\n              <button class=\"btnDelete\" onclick.call=\"deleteBlock(i)\">x</button>\n            </div>\n            <!-- mod list -->\n            <div class=\"mod d-flex align-items-center\" repeat.for=\"j of blocks[i].mods.length\" id.bind=\"j\">\n\n              <!-- checkbox -->\n              <input class=\"checkbox mr-1\" type=\"checkbox\" checked.bind=\"blocks[i].mods[j].activate\" />\n              <!-- mod select -->\n              <div name=\"modsearch\" class=\"searchable\">\n                <input name=\"modsearchinput\" type=\"text\" autocomplete=\"off\" placeholder=\"+Add Stat Mod\" onkeyup.call=\"filterFunction2($this,$event)\" value.bind=\"blocks[i].mods[j].name\" onchange.call=\"oninput($this, $event)\"\n                  onfocus.call=\"onModInputFocus($this, $event, i, j)\" onblur.call=\"onModInputBlur($this, $event, i, j)\">\n                <dl name=\"modsearchlist\" class=\"modlist\">\n                  <!-- automatically filled with mods -->\n                  <!-- <dt></dt> -->\n                  <!-- <dd></dd> -->\n                  <!-- <modlist title.bind=\"section\" mods.bind=\"modsSections.\"></modlist> -->\n                  <section repeat.for=\"[section, mods] of modsSections\">\n                    <dt>${section}</dt>\n                    <dd repeat.for=\"modname of mods\" onmouseover.call=\"onDDHover($this, $event, i, j, modname)\" onclick.call=\"onDDClick($this, $event, i, j, modname)\">${modname}</dd>\n                  </section>\n                </dl>\n              </div>\n              <!-- mod min/max -->\n              <input class=\"ml-2 mr-2\" type=\"number\" value.bind=\"blocks[i].mods[j].min\" placeholder=\"min\" />\n              <input class=\"mr-2\" type=\"number\" value.bind=\"blocks[i].mods[j].max\" placeholder=\"max\" />\n              <!-- mod delete -->\n              <button class=\"btnDelete\" onclick.call=\"deleteMod(i, blocks[i].mods[j].name)\">x</button>\n\n            </div>\n            <!-- create mod -->\n            <div>\n              <button class=\"btnAdd\" click.delegate=\"addStatMod($this, $event, i)\">+Add Stat Mod</button>\n              <div name=\"modsearch\" class=\"searchable\">\n                <dl name=\"modsearchlist\" class=\"modlist\">\n                  <section repeat.for=\"[section, mods] of modsSections\">\n                    <dt>${section}</dt>\n                    <dd repeat.for=\"modname of mods\" onmouseover.call=\"onDDHover($this, $event, i, j, modname)\" onclick.call=\"onDDClick($this, $event, i, j, modname)\">${modname}</dd>\n                  </section>\n                </dl>\n              </div>\n            </div> <!-- end of create mod -->\n          </div> <!-- end of block list -->\n\n          <!-- create block -->\n          <div class=\"block\">\n            <button class=\"btnAdd\" onclick.call=\"addBlock()\">+Add Stat Block</button>\n          </div>\n        </div>\n\n        <!--\n        <div>\n          <ul ref=\"modsearchlist\">\n            <li>Algeria</li>\n            <li>Bulgaria</li>\n            <li>Canada</li>\n            <li>Egypt</li>\n            <li>Fiji</li>\n            <li>India</li>\n            <li>Japan</li>\n            <li>Iran (Islamic Republic of)</li>\n            <li>Lao People's Democratic Republic</li>\n            <li>Micronesia (Federated States of)</li>\n            <li>Nicaragua</li>\n            <li>Senegal</li>\n            <li>Tajikistan</li>\n            <li>Yemen</li>\n          </ul>\n          <div>\n            <input list=\"brow\">\n            <datalist id=\"brow\">\n              <option value=\"Internet Explorer\">\n              <option value=\"Firefox\">\n              <option value=\"Chrome\">\n              <option value=\"Opera\">\n              <option value=\"Safari\">\n            </datalist>\n          </div>\n          <select class=\"js-example-basic-single\" name=\"state\">\n            <option value=\"AL\">Alabama</option>\n            <option value=\"WY\">Wyoming</option>\n          </select>\n        </div> -->\n\n      </div>\n    </div>\n\n    <!-- Search button -->\n    <div class=\"row\">\n      <button class=\"btnSearch\" onclick.call=\"search()\">Search</button>\n    </div>\n\n  </div>\n\n</template>\n","import { numeral } from 'numeral';\nimport { inject, bindable, View, observable } from 'aurelia-framework';\nimport * as Masonry from 'masonry-layout'\nimport { WebAPI } from '../../api';\n\nimport { filter, ModFilter, BlockFilter } from './filter';\nimport { util, Mason } from '../../util';\n\n@inject(WebAPI)\nexport class itemsearch {\n\n\tpublic static inst: itemsearch;\n\n\t// @bindable public data: object[] = [];\n\n\t@bindable public loadedCount: number = 0;\n\t// event handler function\n\tpublic onLoadedSheet = null;\n\n\tpublic mason: Mason;\n\tpublic grid: HTMLDivElement;\n\n\tpublic attachedb: boolean = false;\n\tpublic queriedb: boolean = false;\n\n\t// total filter?\n\tpublic filter: string;\n\n\t// string search bar value\n\tpublic searchbar: string;\n\n\t// Ctor\n\tconstructor(private api: WebAPI) {\n\t\titemsearch.inst = this;\n\n\t\tthis.mason = new Mason();\n\t\tthis.mason.obj = this;\n\n\t\tthis.onLoadedSheet = util.debounce(() => {\n\t\t\tthis.mason.reloadMsnry();\n\t\t}, 100, false);\n\t\t// window.addEventListener('resize', this.debounce(this.smartresize, 500, false), true);\n\t\t// this.onLoadedSheet = this.reloadMsnry;\n\n\t\t// this.data = App.data;\n\t\t// console.log(\"itemsearch ctor : \" + this.grid);\n\n\t\t// this.query();\n\n\t\t// this.search(new filter());\n\t}\n\n\t// search button on the filter component\n\t// creates a mongo query then sends a request to the api and reload msnry\n\tpublic search(filter: filter) {\n\t\tvar adds = { $addFields: {} };\n\t\tvar mongofilter = { $and: [] };\n\t\tvar types = { $or: [] };\n\n\n\t\t// Level\n\t\tif (filter.filterLevel) {\n\t\t\tmongofilter.$and.push({ \"level\": { \"$gte\": parseInt(filter.levelMin + \"\") } });\n\t\t\tmongofilter.$and.push({ \"level\": { \"$lte\": parseInt(filter.levelMax + \"\") } });\n\t\t}\n\t\t// Types\n\t\tif (filter.filterType) {\n\t\t\tfilter.types.forEach((v, k) => {\n\t\t\t\tif (v)\n\t\t\t\t\ttypes.$or.push({ \"type\": k });\n\t\t\t})\n\t\t}\n\t\t// Types\n\t\tif (filter.filterWeapon) {\n\t\t\tfilter.armes.forEach((v, k) => {\n\t\t\t\tif (v)\n\t\t\t\t\ttypes.$or.push({ \"type\": k });\n\t\t\t})\n\t\t}\n\t\tif (filter.filterText && filter.filterText != \"\") {\n\t\t\tmongofilter.$and.push(\n\t\t\t\t{\n\t\t\t\t\t\"$or\": [\n\t\t\t\t\t\t{ \"name.fr\": { \"$regex\": util.caseAndAccentInsensitive(filter.filterText), \"$options\": \"i\" } },\n\t\t\t\t\t\t// { \"type\": { \"$regex\": filter.filterText, \"$options\": \"i\" } }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t\t// { \"name\": new RegExp(filter.filterText, \"i\") }\n\t\t\t\t// { \"name\": filter.filterText } // would be actual text search rather than name and it would search for halfwords and stuff\n\t\t\t\t// { \"$text\": { \"$search\": filter.filterText } } // would be actual text search rather than name and it would search for halfwords and stuff\n\t\t\t);\n\t\t\t// console.log(\"itemsearch filter text : \" + new RegExp(filter.filterText, \"i\"));\n\t\t}\n\t\tif (filter.filterType || filter.filterWeapon) {\n\t\t\tmongofilter.$and.push(types);\n\t\t}\n\t\t// console.log(\"filter blocks : \" + JSON.stringify(filter.blocks));\n\t\t// console.log(\"filter blocks[0] : \" + JSON.stringify(filter.blocks[0]));\n\t\tlet bi = 0;\n\t\tfilter.blocks.forEach(block => {\n\t\t\tif (block.activate) {\n\t\t\t\tif (block.type == \"$sum\") {\n\t\t\t\t\tthis.filterSum(mongofilter, adds, bi, block);\n\t\t\t\t} else {\n\t\t\t\t\tlet arr = block.mods.filter(m => m.activate && m.name != undefined).map((m: ModFilter) => {\n\t\t\t\t\t\tif (m.name.includes(\"Pseudo\")) return this.filterStatPseudo(m);\n\t\t\t\t\t\telse return this.filterStat(m);\n\t\t\t\t\t});\n\n\t\t\t\t\t// console.log(\"filter block : \" + func + \" : \" + JSON.stringify(arr));\n\t\t\t\t\tif (arr.length > 0) {\n\t\t\t\t\t\tmongofilter.$and.push({\n\t\t\t\t\t\t\t[block.type]: arr\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n    \n    var pipeline = [];\n    {\n      // sort\n      pipeline.push({ $sort: { \"level\": -1, \"ankamaID\": -1 } })\n      // sums\n      if(Object.keys(adds.$addFields).length > 0)\n        pipeline.push(adds);\n      // actual filter\n      pipeline.push({ $match: mongofilter } );\n      // limit\n      pipeline.push({ $limit: 100 });\n      // skip\n      pipeline.push({ $skip: 0 });\n    }\n\n\t\t// console.log(\"filter : \" + JSON.stringify(pipeline));\n\t\tthis.query(pipeline);\n\t\t// this.reloadMsnry();\n\t}\n\n\tpublic filterSum(mongofilter, adds, bi, block: BlockFilter) {\n\t\tlet blockid = block.mods.map(m => m.name).reduce((acc, m) => acc + m) + bi;\n\t\t// filter what stats we need to sum\n\t\tlet conds = [];\n\t\tblock.mods.forEach(m => {\n\t\t\tconds.push({\n\t\t\t\t\"$eq\": [\n\t\t\t\t\t\"$$stat.name\",\n\t\t\t\t\tm.name\n\t\t\t\t]\n\t\t\t});\n\t\t});\n\t\t// create a field with the sum of stats\n\t\tadds.$addFields[blockid] = {\n\t\t\t\"$sum\": {\n\t\t\t\t\"$map\": {\n\t\t\t\t\t\"input\": {\n\t\t\t\t\t\t\"$filter\": {\n\t\t\t\t\t\t\t\"input\": \"$statistics\",\n\t\t\t\t\t\t\t\"as\": \"stat\",\n\t\t\t\t\t\t\t\"cond\": {\n\t\t\t\t\t\t\t\t\"$or\": conds\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"as\": \"stat\",\n\t\t\t\t\t\"in\": \"$$stat.max\"\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// filter match on that sum\n\t\tmongofilter.$and.push({\n\t\t\t[blockid]: {\n\t\t\t\t$gte: parseInt((block.mods[0].min || -100000) + \"\"),\n\t\t\t\t$lte: parseInt((block.mods[0].max || 100000) + \"\")\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate filterStatPseudo(m: ModFilter) {\n\t\tlet min: number = parseInt(m.min + \"\");\n\t\tlet max: number = parseInt(m.max + \"\");\n\t\tif (!m.min) min = -100000;\n\t\tlet filter = {\n\t\t\t\"$and\": []\n\t\t};\n\t\t// if (m.min) {\n\t\tfilter.$and.push(\n\t\t\t{\n\t\t\t\t[\"(Pseudo) statistics.\" + m.name]: {\n\t\t\t\t\t\"$gte\": min\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t// }\n\t\tif (m.max) {\n\t\t\tfilter.$and.push(\n\t\t\t\t{\n\t\t\t\t\t[\"(Pseudo) statistics.\" + m.name]: {\n\t\t\t\t\t\t\"$lte\": max\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\treturn filter;\n\t}\n\tprivate filterStat(m: ModFilter) {\n\t\tlet min: number = parseInt(m.min + \"\");\n\t\tlet max: number = parseInt(m.max + \"\");\n\t\t// console.log(\"filter mod (\" + min + \",\" + max + \") : \" + JSON.stringify(m));\n\t\tif (!m.min) min = -100000;\n\t\tlet minfilter = {\n\t\t\t\"name\": m.name,\n\t\t\t\"min\": { \"$gte\": min }\n\t\t};\n\t\tlet maxfilter = {\n\t\t\t\"name\": m.name\n\t\t};\n\t\tif (m.max) {\n\t\t\tminfilter[\"max\"] = { \"$lte\": max };\n\t\t\tmaxfilter[\"max\"] = { \"$lte\": max, \"$gte\": min };\n\t\t} else {\n\t\t\tmaxfilter[\"max\"] = { \"$gte\": min };\n\t\t}\n\t\tlet mm = {\n\t\t\t\"statistics\": {\n\t\t\t\t\"$elemMatch\": {\n\t\t\t\t\t\"$or\": [minfilter, maxfilter]\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn mm;\n\t}\n\n\tpublic query(filter?: any, msn?: boolean) {\n\t\tthis.loadedCount = 0;\n\t\t// default filter\n\t\t// if (!filter) filter = { \"$or\": [{ \"level\": { \"$gte\": 190 } }, { \"type\": \"Dofus\" }] };\n\t\t// call\n\t\tthis.api.getItems(filter).then(response => {\n\t\t\tthis.mason.index = 0; // reset index\n\t\t\tthis.mason.data = [] //.splice(0, this.data.length); // reset select data\n\t\t\tthis.mason.fulldata = response.content; // store full data\n\t\t\tthis.mason.showMore(100); // select data\n\n\t\t\t// console.log(\"itemsearch query : \" + response.content.length);\n\t\t\t// console.log(\"itemsearch query : \" + response.content);\n\n\t\t\t// this.data = response.content;\n\t\t\tthis.queriedb = true;\n\t\t\tif (msn != false) this.mason.initMasonry();\n\t\t});\n\t}\n\n\tpublic smartresize() {\n\t\t// console.log(\"smartresize\");\n\t\t// this.msnry.data()\n\n\t\tif (!this.grid) return;\n\n\t\t//console.log(\"smartresize\");\n\n\t\tvar containerWidth = this.grid.clientWidth;\n\t\t// get number of columns that would be at least 200px\n\t\t// extra 20 is for 10px margin on each side\n\t\tvar colCount: number = Math.floor(containerWidth / 220);\n\t\t// get width of columns that would fit in current container\n\t\t// given number of columns. -20 is to account for 10px margin on each side\n\t\tvar colWidth: number = (containerWidth / colCount) - (20 * colCount);\n\t\t// only animate after first time\n\t\t// var applyStyleFnName: string = firstTime ? 'css' : 'animate';\n\n\t\t// apply width\n\n\t\tthis.grid.children[\"css\"](\n\t\t\t{ width: colWidth },\n\t\t\t{ queue: false }\n\t\t);\n\t\t// var $boxes = $container.find('.box'),\n\t\t// \t$boxes[applyStyleFnName](\n\t\t// \t\t{ width: colWidth },\n\t\t// \t\t{ queue: false }\n\t\t// \t);\n\n\t\t/*\n\t\t$container.masonry({\n\t\t// add 20 for margin\n\t\tcolumnWidth : colWidth + 20,\n\t\tsingleMode: true,\n\t\titemSelector: '.box',\n\t\tresizeable: false,\n\t\tanimate: true\n\t});\n\t*/\n\t\t// firstTime = true;\n\t}\n\n\n\tpublic created(owningView: View, myView: View) {\n\t\t// console.log(\"itemsearch created : \" + this.grid);\n\t}\n\tpublic bind(bindingContext: Object, overrideContext: Object) {\n\t\t// if (this.grid)\n\t\t// \tconsole.log(\"itemsearch bind : \" + this.grid.children.length);\n\t\t// else\n\t\t// \tconsole.log(\"itemsearch bind : null\");\n\t}\n\n\t// When referencing is done (<div ref=\"grid\"> injected into this.grid)\n\tpublic attached() {\n\t\t// console.log(\"itemsearch attached grid : \" + this.grid.children.length);\n\t\tthis.attachedb = true;\n\t\t// this.mason.initMasonry();\n\t}\n\tpublic detached() {\n\t\t// console.log(\"itemsearch detached\");\n\t}\n\tpublic unbind() {\n\t\t// console.log(\"itemsearch unbind\");\n\t}\n\n\n\n}\n","* {\n  -webkit-box-sizing: border-box;\n     -moz-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\n/* body { font-family: sans-serif; } */\n\n.itemsearch {\n  width: 80%;\n  /* max-width: 1350px; */\n  margin: 0 auto;\n}\n\n\n.itemsearch-title {\n  /* margin-left: 10%; */\n}\n","<template>\n  <require from=\"./itemsheet\"></require>\n  <require from=\"./filter\"></require>\n  <require from=\"./itemsearch.css\"></require>\n  <require from=\"../../components/mason.css\"></require>\n\n\n  <div class=\"itemsearch\">\n\n    <!-- Filtres -->\n    <filter filter.bind=\"filter\"></filter>\n\n\n    <!-- <h2 class=\"itemsearch-title\" onclick.call=\"layout()\">Items (${data.length})</h2> -->\n\n    <!-- <button onclick.call=\"showMore()\">Show more</button>\n    <button onclick.call=\"reloadMsnry()\">Reload</button>\n    <button onclick.call=\"layout()\">Layout</button> -->\n\n    <p></p>\n\n    <div class=\"grid-wrapper\">\n      <!-- items -->\n      <!-- show grid only if data is available -->\n      <div class=\"grid\" ref=\"grid\" onchange.call=\"onchange()\">\n        <!-- <div class=\"grid-sizer\"></div> -->\n        <!-- <div class=\"grid-item\" repeat.for=\"item of data\" data.bind=\"item\" style=\"background: pink;\"></div> -->\n        <itemsheet class=\"grid-item\" repeat.for=\"item of mason.data\" data.bind=\"item\"></itemsheet>\n      </div>\n    </div>\n  </div>\n\n</template>\n","import { bindable, inject } from 'aurelia-framework';\nimport { build } from '../build/build';\nimport { itemsearch } from '../items/itemsearch';\nimport { Router } from 'aurelia-router';\nimport { db } from '../../db';\n\n@inject(Router)\nexport class itemsheet {\n\n\t// @bindable property with <element property.bind=\"item\"></element>\n\t@bindable private data: any = {};\n\n\t// check if this item has conditions\n\t// private hasConditions: boolean = false;\n\n\tpublic router: Router;\n\n\tpublic hidden = \"hidden\";\n\n\n\t// Ctor\n\tconstructor(router: Router) {\n\t\tthis.router = router;\n\t\t// this.hasConditions = \"conditions\" in this.data;\n\t\t// console.log(\"itemsheet\");\n\t}\n\n\tpublic isntPseudo(effect) {\n\t\tlet name: string = effect.name;\n\t\treturn name.includes(\"(isntPseudo)\");\n\t}\n\n\tpublic test() {\n\t\t// console.log(\"click \" + this.data.name);\n\t\tif (!build.inst) {\n\t\t\t// build.inst = new build(() => this.router);\n\t\t\twindow.setTimeout(() => build.setItem(this.data), 300);\n\t\t} else {\n\t\t\tbuild.setItem(this.data);\n\t\t}\n\t\tthis.router.navigate(\"/build\");\n\t\t// console.log(\"after nav\");\n\t\t// window.setTimeout(() => build.setItem(this.data), 300);\n\t}\n\n\tpublic getImgUrl() {\n\t\treturn db.getImgUrl(this.data);\n\t}\n\n\t// when binding is done\n\tattached() {\n\t\t// console.log(\"sheet data \" + this.data);\n\t\tif (this.data && this.data.statistics) {\n\t\t\t// console.log(\"sheet stats \" + this.data.statistics);\n\t\t\tthis.data.statistics.forEach(element => {\n\t\t\t\t// console.log(\"sheet stat : \" + JSON.stringify(element));\n\t\t\t\telement.style = db.getStatColor(element.name);\n\t\t\t});\n\t\t}\n\n\t\t// if (itemsearch.inst) itemsearch.inst.loadedCount++;\n\t\tif (itemsearch.inst) itemsearch.inst.onLoadedSheet();\n\t\tthis.hidden = \"\";\n\t}\n\n}\n","/* .alignleft {\n\tfloat: left;\n}\n.alignright {\n\tfloat: right;\n  } */\n\n\n/* class=\"itemsheet\"  */\n/* Maintenant on target l'élément \"itemsheet\" ! */\nitemsheet {\n  --sheetaccent: var(--accent1);\n  --sheetaccenthover: var(--accent0);\n  /* background: #1d3030; */\n  /* background: var(--bg1); */\n  cursor: pointer;\n  /* border: 1px solid var(--sheetaccent); */\n  border: 1px solid transparent;\n  /* box-shadow: 5px 5px 5px black; */\n}\n/* immediate child must fill the itemsheet size for clicks */\nitemsheet .itemsheet {\n  /* width: 100%;\n  height: 100%;\n  align-items: stretch; */\n  min-height: 150px;\n\n  background-repeat: no-repeat;\n  /* background-attachment: fixed; */\n  background-position: center;\n\n}\nitemsheet .itemsheet::after {\n  opacity: 0.5;\n}\n\nitemsheet .bgimg {\n  display: inline;\n  /* width: 100%; */\n  /* height: 100%; */\n  /* min-height: 150px; */\n  opacity: 0.5;\n  background-repeat: no-repeat;\n  /* background-attachment: fixed; */\n  background-position: center;\n}\n\nitemsheet img {\n  width: 55px;\n  height: 55px;\n}\n\nitemsheet .title {\n  padding: 5px;\n  /* background: var(--sheetaccent); */\n  color: var(--sheetaccent);\n  font-size: 1.1rem;\n}\nitemsheet .statistics {\n  padding: 5px;\n}\nitemsheet .statistics ul {\n    list-style: none;\n    margin: 0px;\n    padding: 0px;\n}\nitemsheet .statistic {\n\n}\nitemsheet .conditions {\n  /* border-top: 1px solid var(--sheetaccent); */\n}\n\n\nitemsheet:hover {\n  border: 1px solid var(--sheetaccenthover);\n}\nitemsheet:hover .title {\n  color: var(--sheetaccenthover);\n  /* background: var(--sheetaccenthover); */\n}\nitemsheet:hover .conditions {\n  border-top: 1px solid var(--sheetaccenthover);\n}\n\n/* .grid-item { width: 200px; } */\n","<template>\n  <require from=\"./itemsheet.css\"></require>\n\n\n  <!-- englobing class div for css -->\n  <div class=\"itemsheet\" onclick.call=\"test()\" ${hidden}>\n    <!-- <img class=\"bgimg\" src=\"${getImgUrl()}\"> -->\n    <!-- <div class=\"bgimg\" style=\"background-image: url('${getImgUrl()}');\"></div> -->\n\n    <!-- style=\"background-image: '${data.imgUrl}';\" -->\n    <!-- put the image as background ? -->\n    <!-- Image and weapon stats -->\n    <div class=\"title d-flex flex-nowrap\">\n      <img src=\"${getImgUrl()}\">\n      <!-- Name and level -->\n      <div>\n        <span>${data.name.fr}</span><br>\n        <span>${data.level}</span>\n      </div>\n      <!-- ${data.description} -->\n    </div>\n\n\n    <!-- Effects -->\n    <div class=\"statistics\">\n      <ul if.bind=\"data.characteristics\" style=\"border-bottom: 1px dashed var(--accent1);\">\n        <div>\n          <span>PA</span>\n          <span>${data.characteristics[0][\"PA\"]}</span>\n        </div>\n        <div>\n          <span>Portée</span>\n          <span>${data.characteristics[1][\"Portée\"]}</span>\n        </div>\n        <div>\n          <span>CC</span>\n          <span>${data.characteristics[2][\"CC\"]}</span>\n        </div>\n      </ul>\n      <ul>\n        <!-- 1 row for each effect -->\n        <li class=\"row\" repeat.for=\"effect of data.statistics\" if=\"isntPseudo(effect)\">\n          <!-- <compose view-model=\"./statistic\" model.bind=\"effect\"></compose> -->\n          <div class=\"container statistic\">\n            ${effect.min}\n            ${effect.min == null ? \"\" : \"à\"}\n            ${effect.max}\n            <span style.bind=\"effect.style\">${effect.name}</span>\n            <!-- ${effect} -->\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <!-- Conditions -->\n    <!-- <div class=\"conditions\" if.bind=\"data.conditions\" style=\"border-top: 1px dashed var(--accent1);\">\n      <ul style=\"list-style: none; margin: 0px; padding: 0px;\">\n        <li repeat.for=\"cond of data.conditions\">\n          ${cond}\n        </li>\n      </ul>\n    </div> -->\n\n  </div>\n\n</template>\n","import { inject, bindable, View, observable } from 'aurelia-framework';\nimport { setsearch } from './setsearch';\nimport { db } from '../../db';\nimport * as $ from 'jquery';\n\nexport class setfilter {\n\n\tpublic static inst: setfilter;\n\n\t// Static data\n\tpublic modsSections: Map<string, string[]>;\n\tpublic styleChecked: any;\n\tpublic styleUnchecked: any;\n\n\t// custom filter data\n\tpublic filterText: string = \"\";\n\n\tpublic filterLevel: boolean = true;\n\tpublic levelMin: number = 190;\n\tpublic levelMax: number = 200;\n\n\t// @observable({ changeHandler: 'filterBonusesChanged' })\n\tpublic filterBonuses: boolean = false;\n\tpublic bonuses: Map<string, boolean>;\n\n\t@observable({ changeHandler: 'filterTypeInChanged' })\n\tpublic filterTypeIn: boolean = false;\n\tpublic typesIn: Map<string, boolean>;\n\n\t@observable({ changeHandler: 'filterTypeOutChanged' })\n\tpublic filterTypeOut: boolean = false;\n\tpublic typesOut: Map<string, boolean>;\n\n\t// mods blocks\n\tpublic blocks: BlockFilter[];\n\n\t// html elements\n\tpublic blocklist: HTMLDivElement;\n\t// public modsearch: any;\n\t// public modsearchinput: any;\n\t// public modsearchlist: any;\n\n\tconstructor() {\n\t\tsetfilter.inst = this;\n\n\t\tthis.modsSections = new Map<string, string[]>();\n\t\tthis.modsSections.set(\"Pseudo\", [\n\t\t\t\"(Pseudo) # res\",\n\t\t\t\"(Pseudo) # res élémentaires\",\n\t\t\t\"(Pseudo) Total #% res\",\n\t\t\t\"(Pseudo) Total #% res élémentaires\",\n\t\t]);\n\t\tdb.getStatNames().forEach((v, k) => {\n\t\t\tthis.modsSections.set(k, v);\n\t\t});\n\n\t\tthis.bonuses = new Map<string, boolean>();\n\t\tthis.typesIn = new Map<string, boolean>();\n\t\tthis.typesOut = new Map<string, boolean>();\n\n\t\tthis.bonuses.set(\"PA\", false);\n\t\tthis.bonuses.set(\"PM\", false);\n\t\tthis.bonuses.set(\"PO\", false);\n\n\t\tlet typess = db.getItemsTypes().concat(db.getPetTypes());\n\t\ttypess.push(\"Arme\");\n\t\ttypess.forEach(s => {\n\t\t\tthis.typesIn.set(s, false);\n\t\t\tthis.typesOut.set(s, false);\n\t\t\t// console.log(\"setfilter type \" + s);\n\t\t});\n\n\t\tthis.styleChecked = {\n\t\t\tcolor: \"var(--front1)\",\n\t\t\tbackground: \"var(--accent1)\",\n\t\t};\n\t\tthis.styleUnchecked = {\n\t\t\tcolor: \"var(--front0)\",\n\t\t\tbackground: \"transparent\",\n\t\t};\n\n\t\tthis.blocks = [];\n\t\tthis.addBlock();\n\t\tthis.loadFilter();\n\n\t\tthis.search();\n\n\t\t// console.log(\"blocks : \" + JSON.stringify(this.blocks[0]));\n\t}\n\n\tpublic created(owningView: View, myView: View) {\n\t}\n\tpublic bind(bindingContext: Object, overrideContext: Object) {\n\t\t// console.log(\"bind blocklist : \" + this.blocklist);\n\t}\n\tpublic attached() {\n\t\twindow.addEventListener('keypress', this.handleKeyInput, false);\n\t}\n\tpublic detached() {\n\t\twindow.removeEventListener('keypress', this.handleKeyInput);\n\t}\n\tpublic unbind() {\n\t}\n\n\tpublic handleKeyInput = (event) => {\n\t\tif (event.key == \"Enter\") this.search();\n\t}\n\n\tpublic search() {\n\t\tsetsearch.inst.search(this);\n\t\tthis.saveFilter();\n\t}\n\n\tpublic loadFilter() {\n\t\tlet json = localStorage.getItem(\"setfilter\");\n\t\tif (json) {\n\t\t\tlet data = JSON.parse(json);\n\t\t\tthis.filterLevel = data.filterLevel;\n\t\t\tthis.filterText = data.filterText;\n\t\t\tthis.levelMin = data.levelMin;\n\t\t\tthis.levelMax = data.levelMax;\n\t\t\tthis.typesIn = new Map<string, boolean>(data.typesIn);\n\t\t\tthis.typesOut = new Map<string, boolean>(data.typesOut);\n\t\t\tthis.filterLevel = data.filterLevel;\n\t\t\tthis.filterBonuses = data.filterBonuses;\n\t\t\tthis.filterTypeIn = data.filterTypeIn;\n\t\t\tthis.filterTypeOut = data.filterTypeOut;\n\t\t\tthis.blocks = data.blocks;\n\t\t}\n\t}\n\tpublic saveFilter() {\n\t\tlet obj = {\n\t\t\tfilterText: this.filterText,\n\t\t\tlevelMin: this.levelMin,\n\t\t\tlevelMax: this.levelMax,\n\t\t\ttypesIn: Array.from(this.typesIn.entries()),\n\t\t\ttypesOut: Array.from(this.typesOut.entries()),\n\t\t\tfilterLevel: this.filterLevel,\n\t\t\tfilterBonuses: this.filterBonuses,\n\t\t\tfilterTypeIn: this.filterTypeIn,\n\t\t\tfilterTypeOut: this.filterTypeOut,\n\t\t\tblocks: this.blocks\n\t\t};\n\t\tlocalStorage.setItem(\"setfilter\", JSON.stringify(obj));\n\t}\n\n\tpublic setBlock(blockIndex: number, type: string, args: number[]) {\n\t\t// args would be like min/max if the type is Sum\n\t\tthis.blocks[blockIndex].type = type;\n\t\tthis.blocks[blockIndex].min = args[0];\n\t\tthis.blocks[blockIndex].max = args[1];\n\t\tthis.blocks[blockIndex].activate = true;\n\t\tthis.blocks[blockIndex].mods = [];\n\t}\n\tpublic deleteBlock(blockIndex: number) {\n\t\tthis.blocks.splice(blockIndex, 1);\n\t}\n\n\tpublic setMod(blockIndex: number, mod: string, args: number[]) {\n\t\t// if (!this.blocks[blockIndex].mods.has(mod)) {\n\t\t// \tthis.blocks[blockIndex].mods.set(mod, {});\n\t\t// }\n\n\t\tlet m = this.blocks[blockIndex].mods.find(e => e.name == mod);\n\t\tif (!m) {\n\t\t\tm = new ModFilter();\n\t\t\tthis.blocks[blockIndex].mods.push(m); //mod, args[0], args[1], true));\n\t\t}\n\t\t// else {\n\t\t// args would be min/max normally\n\t\tm.name = mod\n\t\tif (args.length > 0) m.min = args[0];\n\t\tif (args.length > 1) m.max = args[1];\n\t\tm.activate = true;\n\t\t// }\n\t}\n\tpublic deleteMod(blockIndex: number, mod: string) {\n\t\t// this.blocks[blockIndex].mods.delete(mod);\n\t\tlet m = this.blocks[blockIndex].mods.find(e => e.name == mod);\n\t\tif (m) {\n\t\t\tlet i = this.blocks[blockIndex].mods.indexOf(m);\n\t\t\tthis.blocks[blockIndex].mods.splice(i, 1);\n\t\t}\n\t}\n\n\tpublic filterBonusesClicked() {\n\t\tvar activated = this.filterBonuses;\n\t\tthis.bonuses.forEach((value, key) => this.bonuses.set(key, !activated));\n\t}\n\tpublic checkBonus(type) {\n\t\tvar activated = this.bonuses.get(type);\n\t\tthis.bonuses.set(type, !activated);\n\t\tthis.filterBonuses = this.hasValue(this.bonuses, true);\n\t}\n\tpublic filterTypeInClicked() {\n\t\tvar activated = this.filterTypeIn;\n\t\tthis.typesIn.forEach((value, key) => this.typesIn.set(key, !activated));\n\t}\n\tpublic checkTypeIn(type) {\n\t\tvar activated = this.typesIn.get(type);\n\t\tthis.typesIn.set(type, !activated);\n\t\tthis.filterTypeIn = this.hasValue(this.typesIn, true);\n\t}\n\tpublic filterTypeOutClicked() {\n\t\tvar activated = this.filterTypeOut;\n\t\tthis.typesOut.forEach((value, key) => this.typesOut.set(key, !activated));\n\t}\n\tpublic checkTypeOut(type) {\n\t\tthis.typesOut.set(type, !this.typesOut.get(type));\n\t\tthis.filterTypeOut = this.hasValue(this.typesOut, true);\n\t}\n\n\n\tprivate hasValue(map: Map<string, boolean>, value: boolean) {\n\t\tfor (const [key, val] of Array.from(map.entries())) {\n\t\t\tif (val == value) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/* When the user clicks on the button,\n\ttoggle between hiding and showing the dropdown content */\n\tpublic myFunction() {\n\t\tdocument.getElementById(\"myDropdown\").classList.toggle(\"show\");\n\t}\n\tpublic filterFunction() {\n\t\tvar input, filter, ul, li, a, i;\n\t\tinput = document.getElementById(\"myInput\");\n\t\tfilter = input.value.toUpperCase();\n\t\tvar div = document.getElementById(\"myDropdown\");\n\t\ta = div.getElementsByTagName(\"a\");\n\t\tfor (i = 0; i < a.length; i++) {\n\t\t\tvar txtValue = a[i].textContent || a[i].innerText;\n\t\t\tif (txtValue.toUpperCase().indexOf(filter) > -1) {\n\t\t\t\ta[i].style.display = \"\";\n\t\t\t} else {\n\t\t\t\ta[i].style.display = \"none\";\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\n\n\tpublic filterFunction2(that, event) {\n\t\t// console.log(\"filter that : \" + event.target);\n\t\tlet container, input, filter, li, input_val;\n\t\tcontainer = $(event.target).closest(\"searchable\");\n\t\tinput = container.find(\"input\");\n\t\t// console.log(\"filter input : \" + input + \", val : \" + input.val());\n\t\tinput_val = input.val() + \"\";\n\t\tif (input_val == \"undefined\") input_val = \"\";\n\t\tinput_val = input_val.toUpperCase();\n\t\tif ([\"ArrowDown\", \"ArrowUp\", \"Enter\"].indexOf(event.key) != -1) {\n\t\t\tthis.keyControl(event, container)\n\t\t} else {\n\t\t\tli = container.find(\"dl dd\");\n\t\t\tli.each(function(i, obj) {\n\t\t\t\tif ($(this).text().toUpperCase().indexOf(input_val) > -1) {\n\t\t\t\t\t$(this).show();\n\t\t\t\t} else {\n\t\t\t\t\t$(this).hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find(\"dl dd\").removeClass(\"selected\");\n\t\t\tsetTimeout(function() {\n\t\t\t\tcontainer.find(\"dl dd:visible\").first().addClass(\"selected\");\n\t\t\t}, 100)\n\t\t}\n\t}\n\tpublic keyControl(e, container) {\n\t\tif (e.key == \"ArrowDown\") {\n\t\t\tif (container.find(\"dl dd\").hasClass(\"selected\")) {\n\t\t\t\tif (container.find(\"dl dd:visible\").index(container.find(\"dl dd.selected\")) + 1 < container.find(\"dl dd:visible\").length) {\n\t\t\t\t\tcontainer.find(\"dl dd.selected\").removeClass(\"selected\").nextAll().not('[style*=\"display: none\"]').first().addClass(\"selected\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet dd = container.find(\"dl dd:first-child\");\n\t\t\t\t// console.log(\"first dd : \" + dd.html());\n\t\t\t\tcontainer.find(\"dl dd:first-child\").addClass(\"selected\");\n\t\t\t}\n\t\t} else if (e.key == \"ArrowUp\") {\n\t\t\tif (container.find(\"dl dd:visible\").index(container.find(\"dl dd.selected\")) > 0) {\n\t\t\t\tcontainer.find(\"dl dd.selected\").removeClass(\"selected\").prevAll().not('[style*=\"display: none\"]').first().addClass(\"selected\");\n\t\t\t}\n\t\t} else if (e.key == \"Enter\") {\n\t\t\tcontainer.find(\"input\").val(container.find(\"dl dd.selected\").text()).blur();\n\t\t\tthis.onSelect(container.find(\"dl dd.selected\").text())\n\t\t}\n\t\tlet selectedDD = container.find(\"dl dd.selected\")[0];\n\t\t// console.log(\"selectedDD \" + selectedDD);\n\t\tif (selectedDD) {\n\t\t\t// selectedDD.scrollIntoView({\n\t\t\t// \tbehavior: \"smooth\",\n\t\t\t// });\n\t\t}\n\t}\n\n\tpublic onSelect(val) {\n\t\t// alert(val)\n\t}\n\n\n\n\n\n\tpublic addBlock() {\n\t\tthis.blocks.push({\n\t\t\ttype: \"$and\",\n\t\t\tmin: 0,\n\t\t\tmax: 0,\n\t\t\tmods: [new ModFilter()], //new Map<string, any>(),\n\t\t\tactivate: true,\n\t\t});\n\t}\n\tpublic addStatMod(that, event, blockid: number) {\n\t\tthis.blocks[blockid].mods.push(new ModFilter());\n\n\t\tlet ele: HTMLElement = event.target;\n\t\t// console.log(\"addStatMod : \" + ele.parentElement.children.item(1));\n\n\t\t$(ele.parentElement.children.item(1)).show();\n\t\t// $(event.target).closest(\".searchable\").find(\"dl section dd\").show();\n\t\t// $(event.target).closest(\".searchable\").find(\"input\").focus();\n\t}\n\tpublic onModInputFocus(that, event, blockid, modid) {\n\t\t// console.log(\"onFocusModInput [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\t$(event.target).closest(\".searchable\").find(\"dl\").show();\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd\").show();\n\t}\n\tpublic onModInputBlur(that, event, blockid, modid) {\n\t\t// console.log(\"onModInputBlur [\" + blockid + \",\" + modid + \"] : \" + that);\n\t\t// let that = this;\n\t\tsetTimeout(function() {\n\t\t\t$(event.target).closest(\".searchable\").find(\"dl\").hide();\n\t\t}, 300);\n\t}\n\tpublic oninput(that, event) {\n\t\t// console.log(\"oninput : \" + that + \" - \" + event.target);\n\t\t// console.log(\"blocks : \" + JSON.stringify(this.blocks[0]));\n\t}\n\tpublic onDDHover(that, event, blockid, modid, modname) {\n\t\t// console.log(\"onHover : \" + JSON.stringify(this.blocks));\n\t\t$(event.target).closest(\".searchable\").find(\"dl section dd.selected\").removeClass(\"selected\");\n\t\t$(event.target).addClass(\"selected\");\n\t}\n\tpublic onDDClick(that, event, blockid, modid, modname) {\n\t\t// console.log(\"onDDClick : \" + event);\n\t\t// console.log(\"blocks : \" + JSON.stringify(filter.inst.blocks));\n\t\t// this is the DD list element\n\t\tlet ele: HTMLElement = event.target; //event.currentTarget;\n\n\t\t// let modelement = ele.parentElement.parentElement.parentElement;\n\t\t// let blockelement = modelement.parentElement;\n\n\t\t// let oldmod = ele.parentElement.parentElement.parentElement.id;\n\t\t// let blockId = Number.parseInt(ele.parentElement.parentElement.parentElement.parentElement.id);\n\t\t// this.setMod(blockId, ele.innerHTML, []);\n\t\t// let blockid = Number.parseInt(blockelement.id);\n\t\t// let modid = modelement.id;\n\n\t\tthis.blocks[blockid].mods[modid].name = modname; //$(ele).text();\n\n\t\t// let val = $(ele).text(); // ele.innerHTML\n\t\t// this.onSelect(val);\n\n\t\tlet input = $(ele).closest(\".searchable\").find(\"input\");\n\t\tinput.blur();\n\t\t// let modlist = ele.parentElement;\n\t\t// modlist.blur();\n\n\t\t// input.val(val).blur();\n\t\t// let inp: HTMLInputElement = input.va\n\n\t\t// $(this).closest(\".searchable\").find(\"input\").val($(this).text()).blur();\n\t\t// this.onSelect($(this).text())\n\n\t\t// console.log(\"blocks : \" + JSON.stringify(filter.inst.blocks[0]));\n\t}\n\n\n\n}\n\n\n\nexport class BlockFilter {\n\tpublic type: string = \"$and\";\n\tpublic min: number;\n\tpublic max: number;\n\tpublic activate: boolean = true;\n\tpublic mods: ModFilter[] = [];\n\tpublic constructor() {\n\t}\n\t// public constructor(type: string, min: number, max: number, activate: boolean, mods?: ModFilter[]) {\n\t// }\n}\n\nexport class ModFilter {\n\tpublic name: string;\n\tpublic min: number;\n\tpublic max: number;\n\tpublic activate: boolean = true;\n\tpublic constructor() {\n\t}\n\t// public constructor(name: string, min: number, max: number, activate: boolean) {\n\t// \tif(name) this.name = name;\n\t// \tif(min)this.min = min;\n\t// \tif(max)this.max = max;\n\t// \tif(activate)this.activate = activate;\n\t// }\n}\n",".searchable {\n  width: 100%;\n  // width: 300px;\n  float: left;\n  // margin: 0 15px;\n}\n\n.searchable input {\n    width: 100%;\n    // height: 40px;\n    // font-size: 18px;\n    // padding: 10px;\n    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */\n    -moz-box-sizing: border-box; /* Firefox, other Gecko */\n    box-sizing: border-box; /* Opera/IE 8+ */\n    display: block;\n    // font-weight: 400;\n    // line-height: 1.6;\n    // color: #495057;\n    // background-color: #fff;\n    background-clip: padding-box;\n    border: 1px solid  var(--accent1);\n    // border-radius: .25rem;\n    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;\n    // background: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\") no-repeat right .75rem center/8px 10px;\n}\n\n.searchable dl {\n  width: 100%;\n  // float:left;\n  position:absolute;\n  display: none;\n  list-style-type: none;\n  // background-color: #fff;\n  // border-radius: 0 0 5px 5px;\n  border: 1px solid var(--accent1);\n  border-top: none;\n  max-height: 380px;\n  margin: 0;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  padding: 0;\n  background-color: var(--bg0);\n  z-index: 3;\n}\n\n.searchable dl dt {\n  // color: var(--accent1);\n  height: 25px;\n  // border-bottom: 1px solid #e1e1e1;\n  color: var(--front0);\n  background-color: var(--bg1);\n  z-index: 4;\n}\n.searchable dl dd {\n  height: 25px;\n  // padding: 7px 9px;\n  // border-bottom: 1px solid #e1e1e1;\n  cursor: pointer;\n  // color: #6e6e6e;\n  color: var(--front0);\n  background-color: var(--bg0);\n  z-index: 4;\n  margin: 0px;\n}\n\n.searchable dl dd.selected {\n    background-color: #e8e8e8;\n    color: #333;\n}\n\n\nsetfilter {\n\n}\n\nsetfilter>div {\n  /* width: 1200px; */\n  /* height: 300px; */\n  /* background: white; */\n  /* border: 1px solid var(--accent1); */\n  max-width: 85% !important;\n}\n\n/* Search bar */\nsetfilter .search {\n  width: 100%;\n  height: 40px;\n  padding-left: 5px;\n}\n\n\n/* Toggle button */\nsetfilter .toggle {\n  border: 1px solid var(--accent1);\n  background: transparent;\n  margin-bottom: 4px;\n  margin-right: 4px;\n  padding: 2px;\n  cursor: pointer;\n  text-align: center;\n  min-width: 50px;\n  height: 35px;\n}\nsetfilter .toggle label {\n  cursor: pointer;\n  margin: 0px;\n}\n\n/* Checkbox input */\nsetfilter input[type=\"checkbox\"] {\n  appearance: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n}\nsetfilter .checkbox {\n  width: 15px;\n  height: 15px;\n  background: var(--bg0);\n  border: 1px solid var(--accent1);\n  padding: 2px;\n}\nsetfilter .checkbox:checked {\n  background: var(--accent1);\n}\n\n\n/* title labels */\nsetfilter .title {\n  font-size: 25px;\n  font-weight: bold;\n  /* margin-left: 5px; */\n}\n\n/* block list */\nsetfilter .blocklist {\n\n}\nsetfilter .blocklist .block {\n  margin-bottom: 10px;\n}\nsetfilter .blocklist .block .blocktitle {\n  font-size: 20px;\n  color: var(--front0);\n  background: var(--bg0);\n  border-color: var(--bg0);\n  width: 100%;\n  /* margin-left: 5px; */\n  /* font-weight: bold; */\n}\nsetfilter .blocklist .block .blocktitle:focus {\n  border-color: var(--bg0) !important;\n}\nsetfilter .blocklist .block .mod {\n  margin-bottom: 10px;\n}\nsetfilter .blocklist .block .mod label {\n  background: var(--bg1);\n  width: 65%;\n  /* margin-left: 5px;\n  margin-right: 5px; */\n  margin-bottom: 0px\n  /* background: var(--bg1); */\n  /* font-size: 20px; */\n  /* font-weight: bold; */\n}\n\nsetfilter .btnAdd {\n  width: 100%;\n}\n\n/* left side */\n.leftside {\n  padding-left: 1px;\n}\n/* right side */\n.rightside {\n  padding-right: 1px;\n}\n","<template>\n  <require from=\"./setfilter.less\"></require>\n\n  <!-- <link href=\"https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css\" rel=\"stylesheet\" />\n  <script src=\"https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js\"></script> -->\n\n  <div class=\"container\">\n\n    <!-- Search -->\n    <div class=\"row\">\n      <input class=\"search\" type=\"text\" value.bind=\"filterText\" placeholder=\"search...\" focus=\"true\" />\n    </div>\n\n    <!-- tagify search box ? = search sur item names, panoplies, effets, types d'items (capecoiffe..).... -->\n    <!-- exemple tu clic sur [() Agilité ] et ça remplace le text par 2 box min/max à côté de l'icône d'agi -->\n\n    <div class=\"row\">\n      <!--Generic filters left side -->\n      <div class=\"leftside col\">\n\n        <!-- Level -->\n        <div class=\"d-flex align-items-center\">\n          <input class=\"checkbox mr-1\" type=\"checkbox\" id=\"level\" checked.bind=\"filterLevel\" />\n          <label class=\"title mr-auto\" for=\"level\">Level</label>\n          <input class=\"mr-2\" type=\"number\" value.bind=\"levelMin\" placeholder=\"min\" />\n          <input class=\"\" type=\"number\" value.bind=\"levelMax\" placeholder=\"max\" />\n        </div>\n\n        <!-- Bonus majeurs -->\n        <input class=\"checkbox\" type=\"checkbox\" id=\"bonus\" checked.bind=\"filterBonuses\" onclick.call=\"filterBonusesClicked()\" />\n        <label class=\"title\" for=\"bonus\">Bonus</label>\n        <div class=\"d-flex flex-wrap\">\n          <div class=\"toggle\" repeat.for=\"[bonus, value] of bonuses\" onclick.call=\"checkBonus(bonus)\" style.bind=\"value ? styleChecked : styleUnchecked\">\n            <label for=\"${bonus}\" innerHTML.bind=\"bonus\"></label>\n          </div>\n        </div>\n\n        <!-- Types base -->\n        <input class=\"checkbox\" type=\"checkbox\" id=\"typeIn\" checked.bind=\"filterTypeIn\" onclick.call=\"filterTypeInClicked()\" />\n        <label class=\"title\" for=\"typeIn\">Type Inclu</label>\n        <div class=\"d-flex flex-wrap\">\n          <div class=\"toggle\" repeat.for=\"[type, value] of typesIn\" onclick.call=\"checkTypeIn(type)\" style.bind=\"value ? styleChecked : styleUnchecked\">\n            <label for=\"${type}\" innerHTML.bind=\"type\"></label>\n          </div>\n        </div>\n\n        <!-- Types exclus -->\n        <input class=\"checkbox\" type=\"checkbox\" id=\"typeOut\" checked.bind=\"filterTypeOut\" onclick.call=\"filterTypeOutClicked()\" />\n        <label class=\"title\" for=\"typeOut\">Type Exclu</label>\n        <div class=\"d-flex flex-wrap\">\n          <div class=\"toggle\" repeat.for=\"[type, value] of typesOut\" onclick.call=\"checkTypeOut(type)\" style.bind=\"value ? styleChecked : styleUnchecked\">\n            <label for=\"${type}\" innerHTML.bind=\"type\"></label>\n          </div>\n        </div>\n\n        <!-- Types weapons -->\n        <!-- <input class=\"checkbox\" type=\"checkbox\" id=\"armes\" checked.bind=\"filterWeapon\" onclick.call=\"filterWeaponClicked()\" />\n        <label class=\"title\" for=\"armes\">Armes</label>\n        <div class=\"d-flex flex-wrap\">\n          <div class=\"toggle\" repeat.for=\"[arme, value] of armes\" onclick.call=\"checkWeapon(arme)\" style.bind=\"value ? styleChecked : styleUnchecked\">\n            <label for=\"${arme}\" innerHTML.bind=\"arme\"></label>\n          </div>\n        </div> -->\n\n      </div>\n\n      <!-- Mods -->\n      <div class=\"rightside col\">\n        <!-- Mods -->\n        <input class=\"checkbox\" type=\"checkbox\" id=\"mods\" checked />\n        <label class=\"title\" for=\"mods\">Mods</label>\n        <div class=\"blocklist\" ref=\"blocklist\">\n          <!-- block list  -->\n          <div class=\"block\" repeat.for=\"i of blocks.length\" id.bind=\"i\">\n            <!-- block properties -->\n            <div class=\"d-flex align-items-center\">\n              <input class=\"checkbox mr-1\" type=\"checkbox\" id=\"${i}\" checked.bind=\"blocks[i].activate\" />\n              <select class=\"mr-auto blocktitle\" name=\"type\" value.bind=\"blocks[i].type\">\n                <option value=\"$and\">And</option>\n                <option value=\"$or\">Or</option>\n                <option value=\"$nor\">Not</option>\n                <option value=\"$sum\">Sum</option>\n              </select>\n              <!-- <label class=\"mr-auto blocktitle\" for=\"${i}\">${blocks[i].type}</label> -->\n              <button class=\"btnDelete\" onclick.call=\"deleteBlock(i)\">x</button>\n            </div>\n            <!-- mod list -->\n            <div class=\"mod d-flex align-items-center\" repeat.for=\"j of blocks[i].mods.length\" id.bind=\"j\">\n\n              <!-- checkbox -->\n              <input class=\"checkbox mr-1\" type=\"checkbox\" checked.bind=\"blocks[i].mods[j].activate\" />\n              <!-- mod select -->\n              <div name=\"modsearch\" class=\"searchable\">\n                <input name=\"modsearchinput\" type=\"text\" autocomplete=\"off\" placeholder=\"+Add Stat Mod\" onkeyup.call=\"filterFunction2($this,$event)\" value.bind=\"blocks[i].mods[j].name\" onchange.call=\"oninput($this, $event)\"\n                  onfocus.call=\"onModInputFocus($this, $event, i, j)\" onblur.call=\"onModInputBlur($this, $event, i, j)\">\n                <dl name=\"modsearchlist\" class=\"modlist\">\n                  <!-- automatically filled with mods -->\n                  <!-- <dt></dt> -->\n                  <!-- <dd></dd> -->\n                  <!-- <modlist title.bind=\"section\" mods.bind=\"modsSections.\"></modlist> -->\n                  <section repeat.for=\"[section, mods] of modsSections\">\n                    <dt>${section}</dt>\n                    <dd repeat.for=\"modname of mods\" onmouseover.call=\"onDDHover($this, $event, i, j, modname)\" onclick.call=\"onDDClick($this, $event, i, j, modname)\">${modname}</dd>\n                  </section>\n                </dl>\n              </div>\n              <!-- mod min/max -->\n              <input class=\"ml-2 mr-2\" type=\"number\" value.bind=\"blocks[i].mods[j].min\" placeholder=\"min\" />\n              <input class=\"mr-2\" type=\"number\" value.bind=\"blocks[i].mods[j].max\" placeholder=\"max\" />\n              <!-- mod delete -->\n              <button class=\"btnDelete\" onclick.call=\"deleteMod(i, blocks[i].mods[j].name)\">x</button>\n\n            </div>\n            <!-- create mod -->\n            <div>\n              <button class=\"btnAdd\" click.delegate=\"addStatMod($this, $event, i)\">+Add Stat Mod</button>\n              <div name=\"modsearch\" class=\"searchable\">\n                <dl name=\"modsearchlist\" class=\"modlist\">\n                  <section repeat.for=\"[section, mods] of modsSections\">\n                    <dt>${section}</dt>\n                    <dd repeat.for=\"modname of mods\" onmouseover.call=\"onDDHover($this, $event, i, j, modname)\" onclick.call=\"onDDClick($this, $event, i, j, modname)\">${modname}</dd>\n                  </section>\n                </dl>\n              </div>\n            </div> <!-- end of create mod -->\n          </div> <!-- end of block list -->\n\n          <!-- create block -->\n          <div class=\"block\">\n            <button class=\"btnAdd\" onclick.call=\"addBlock()\">+Add Stat Block</button>\n          </div>\n        </div>\n\n\n      </div>\n    </div>\n\n    <!-- Search button -->\n    <div class=\"row\">\n      <button class=\"btnSearch\" onclick.call=\"search()\">Search</button>\n    </div>\n\n  </div>\n\n</template>\n","import { numeral } from 'numeral';\nimport { inject, bindable, View, observable } from 'aurelia-framework';\nimport * as Masonry from 'masonry-layout'\nimport { WebAPI } from '../../api';\n\nimport { setfilter, ModFilter, BlockFilter } from './setfilter';\nimport { util, Mason } from '../../util';\n\n@inject(WebAPI)\nexport class setsearch {\n\n\tpublic static inst: setsearch;\n\n\t// @bindable public data: object[] = [];\n\n\t@bindable public loadedCount: number = 0;\n\t// event handler function\n\tpublic onLoadedSheet = null;\n\n\tpublic mason: Mason;\n\tpublic grid: HTMLDivElement;\n\n\tpublic attachedb: boolean = false;\n\tpublic queriedb: boolean = false;\n\n\t// total filter?\n\tpublic filter: string;\n\n\t// string search bar value\n\tpublic searchbar: string;\n\n\t// Ctor\n\tconstructor(private api: WebAPI) {\n\t\tsetsearch.inst = this;\n\n\t\tthis.mason = new Mason();\n\t\tthis.mason.obj = this;\n\n\t\tthis.onLoadedSheet = util.debounce(() => {\n\t\t\tthis.mason.reloadMsnry();\n\t\t}, 100, false);\n\t}\n\n\n\t// search button on the filter component\n\t// creates a mongo query then sends a request to the api and reload msnry\n\tpublic search(filter: setfilter) {\n\t\tvar adds = { $addFields: {} };\n\t\tvar mongofilter = { $and: [] };\n\t\t// Level\n\t\tif (filter.filterLevel) {\n\t\t\t// mongofilter.$and.push({ \"level\": { \"$gte\": parseInt(filter.levelMin + \"\") } });\n\t\t\t// mongofilter.$and.push({ \"level\": { \"$lte\": parseInt(filter.levelMax + \"\") } });\n\t\t\tmongofilter.$and.push({ \"items.level\": { \"$gte\": parseInt(filter.levelMin + \"\") } });\n\t\t\tmongofilter.$and.push({ \"items.level\": { \"$lte\": parseInt(filter.levelMax + \"\") } });\n\t\t}\n\t\t// set bonus\n\t\tif (filter.filterBonuses) {\n\t\t\tfilter.bonuses.forEach((v, k) => {\n\t\t\t\tif (v)\n\t\t\t\t\tmongofilter.$and.push({ \"bonuses.0.name\": k });\n\t\t\t})\n\t\t}\n\t\t// Types in\n\t\tif (filter.filterTypeIn) {\n\t\t\tfilter.typesIn.forEach((v, k) => {\n\t\t\t\tif (v)\n\t\t\t\t\tmongofilter.$and.push({ \"items.type\": k });\n\t\t\t})\n\t\t}\n\t\t// Types out\n\t\tif (filter.filterTypeOut) {\n\t\t\tfilter.typesOut.forEach((v, k) => {\n\t\t\t\tif (v)\n\t\t\t\t\tmongofilter.$and.push({ \"items.type\": { \"$ne\": k } });\n\t\t\t})\n\t\t}\n\t\t// types in/out\n\t\t// if (filter.filterTypeIn || filter.filterTypeOut) {\n\t\t// \tmongofilter.$and.push(types);\n\t\t// }\n\t\t// name\n\t\tif (filter.filterText && filter.filterText != \"\") {\n\t\t\tmongofilter.$and.push(\n\t\t\t\t{\n\t\t\t\t\t\"$or\": [\n\t\t\t\t\t\t{ \"name.fr\": { \"$regex\": util.caseAndAccentInsensitive(filter.filterText), \"$options\": \"i\" } },\n\t\t\t\t\t\t// { \"type\": { \"$regex\": filter.filterText, \"$options\": \"i\" } }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t\t// { \"name\": new RegExp(filter.filterText, \"i\") }\n\t\t\t\t// { \"name\": filter.filterText } // would be actual text search rather than name and it would search for halfwords and stuff\n\t\t\t\t// { \"$text\": { \"$search\": filter.filterText } } // would be actual text search rather than name and it would search for halfwords and stuff\n\t\t\t);\n\t\t\t// console.log(\"itemsearch filter text : \" + new RegExp(filter.filterText, \"i\"));\n\t\t}\n\n\t\t// console.log(\"filter blocks : \" + JSON.stringify(filter.blocks));\n\t\t// console.log(\"filter blocks[0] : \" + JSON.stringify(filter.blocks[0]));\n\t\tlet bi = 0;\n\t\tfilter.blocks.forEach(block => {\n\t\t\tif (block.activate) {\n\t\t\t\tif (block.type == \"$sum\") {\n\t\t\t\t\tthis.filterSum(mongofilter, adds, bi, block);\n\t\t\t\t} else {\n\t\t\t\t\tlet arr = block.mods.filter(m => m.activate && m.name != undefined).map((m: ModFilter) => {\n\t\t\t\t\t\tif (m.name.includes(\"Pseudo\")) return this.filterStatPseudo(m);\n\t\t\t\t\t\telse return this.filterStat(m);\n\t\t\t\t\t});\n\t\t\t\t\t// console.log(\"filter block : \" + func + \" : \" + JSON.stringify(arr));\n\t\t\t\t\tif (arr.length > 0) {\n\t\t\t\t\t\tmongofilter.$and.push({\n\t\t\t\t\t\t\t[block.type]: arr\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbi++;\n\t\t});\n\n\n\t\t// var pipeline = { \"a\": null, \"m\": { $match: mongofilter } };\n\t\t// if (Object.keys(adds.$addFields).length > 0) {\n\t\t// \tpipeline.a = adds;\n\t\t// }\n    \n    var pipeline = [];\n    {\n      // sort\n      pipeline.push({ $sort: { \"level\": -1, \"ankamaID\": -1 } })\n      // sums\n      if(Object.keys(adds.$addFields).length > 0)\n        pipeline.push(adds);\n      // actual filter\n      pipeline.push({ $match: mongofilter } );\n      // limit\n      pipeline.push({ $limit: 100 });\n      // skip\n      pipeline.push({ $skip: 0 });\n    }\n    \n\t\t// console.log(\"filter : \" + JSON.stringify(pipeline));\n\n\t\tthis.query(pipeline);\n\t\t// this.reloadMsnry();\n\t}\n\n\tpublic filterSum(mongofilter, adds, bi, block: BlockFilter) {\n\t\tlet blockid = block.mods.map(m => m.name).reduce((acc, m) => acc + m) + bi;\n\t\t// filter what stats we need to sum\n\t\tlet conds = [];\n\t\tblock.mods.forEach(m => {\n\t\t\tconds.push({\n\t\t\t\t\"$eq\": [\n\t\t\t\t\t\"$$stat.name\",\n\t\t\t\t\tm.name\n\t\t\t\t]\n\t\t\t});\n\t\t});\n\t\t// create a field with the sum of stats\n\t\tadds.$addFields[blockid] = {\n\t\t\t\"$sum\": {\n\t\t\t\t\"$map\": {\n\t\t\t\t\t\"input\": {\n\t\t\t\t\t\t\"$filter\": {\n\t\t\t\t\t\t\t\"input\": \"$statistics\",\n\t\t\t\t\t\t\t\"as\": \"stat\",\n\t\t\t\t\t\t\t\"cond\": {\n\t\t\t\t\t\t\t\t\"$or\": conds\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"as\": \"stat\",\n\t\t\t\t\t\"in\": \"$$stat.max\"\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// filter match on that sum\n\t\tmongofilter.$and.push({\n\t\t\t[blockid]: {\n\t\t\t\t$gte: parseInt((block.mods[0].min || -100000) + \"\"),\n\t\t\t\t$lte: parseInt((block.mods[0].max || 100000) + \"\")\n\t\t\t}\n\t\t});\n\t}\n\n\n\tpublic filterStatPseudo(m: ModFilter) {\n\t\tlet min: number = parseInt(m.min + \"\");\n\t\tlet max: number = parseInt(m.max + \"\");\n\t\tif (!m.min) min = -100000;\n\t\tlet filter = {\n\t\t\t\"$and\": []\n\t\t};\n\t\t// if (m.min) {\n\t\tfilter.$and.push(\n\t\t\t{\n\t\t\t\t[\"(Pseudo) statistics.\" + m.name]: {\n\t\t\t\t\t\"$gte\": min\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t// }\n\t\tif (m.max) {\n\t\t\tfilter.$and.push(\n\t\t\t\t{\n\t\t\t\t\t[\"(Pseudo) statistics.\" + m.name]: {\n\t\t\t\t\t\t\"$lte\": max\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\treturn filter;\n\t}\n\n\tpublic filterStat(m: ModFilter) {\n\t\tlet min: number = parseInt(m.min + \"\");\n\t\tlet max: number = parseInt(m.max + \"\");\n\n\t\t// console.log(\"filter mod (\" + min + \",\" + max + \") : \" + JSON.stringify(m));\n\t\tif (!m.min) min = -100000;\n\t\tif (!m.max) max = 100000;\n\t\t// let minfilter = {\n\t\t// \"name\": m.name,\n\t\t// \"min\": { \"$gte\": min }\n\t\t// };\n\n\t\tlet maxfilter = {\n\t\t\t\"name\": m.name\n\t\t};\n\t\tif (m.max) {\n\t\t\t// minfilter[\"max\"] = { \"$lte\": max };\n\t\t\tmaxfilter[\"max\"] = { \"$lte\": max, \"$gte\": min };\n\t\t} else {\n\t\t\tmaxfilter[\"max\"] = { \"$gte\": min };\n\t\t}\n\n\t\t// filtre total\n\t\tlet mm = {\n\t\t\t\"statistics\": {\n\t\t\t\t\"$elemMatch\": maxfilter\n\t\t\t}\n\t\t};\n\n\t\t// filtre bonus\n\t\t// let mm = {\n\t\t// \t\"bonuses\": {\n\t\t// \t\t\"$elemMatch\": {\n\t\t// \t\t\t\"$or\": [minfilter, maxfilter]\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\n\t\t// filtre 1 item\n\t\t// let mm = {\n\t\t// \t\"items.statistics\": {\n\t\t// \t\t\"$elemMatch\": maxfilter\n\t\t// \t}\n\t\t// };\n\n\t\treturn mm;\n\t}\n\n\n\tpublic query(filter?: any, msn?: boolean) {\n\t\tthis.loadedCount = 0;\n\t\t// default filter\n\t\t// if (!filter) filter = { \"$or\": [{ \"level\": { \"$gte\": 190 } }, { \"type\": \"Dofus\" }] };\n\t\t// call\n\t\tthis.api.getSets(filter).then(response => {\n\t\t\tthis.mason.index = 0; // reset index\n\t\t\tthis.mason.data = [] //.splice(0, this.data.length); // reset select data\n\t\t\tthis.mason.fulldata = response.content; // store full data\n\t\t\tthis.mason.showMore(50); // select data\n\n\t\t\tconsole.log(\"setsearch query : \" + response.content.length);\n\t\t\t// console.log(\"itemsearch query : \" + response.content);\n\n\t\t\t// this.data = response.content;\n\t\t\tthis.queriedb = true;\n\t\t\tif (msn != false) this.mason.initMasonry();\n\t\t});\n\t}\n\n\n\tpublic created(owningView: View, myView: View) {\n\t\t// console.log(\"itemsearch created : \" + this.grid);\n\t}\n\tpublic bind(bindingContext: Object, overrideContext: Object) {\n\t\t// if (this.grid)\n\t\t// \tconsole.log(\"itemsearch bind : \" + this.grid.children.length);\n\t\t// else\n\t\t// \tconsole.log(\"itemsearch bind : null\");\n\t}\n\n\t// When referencing is done (<div ref=\"grid\"> injected into this.grid)\n\tpublic attached() {\n\t\t// console.log(\"itemsearch attached grid : \" + this.grid.children.length);\n\t\tthis.attachedb = true;\n\t\t// this.mason.initMasonry();\n\t}\n\tpublic detached() {\n\t\t// console.log(\"itemsearch detached\");\n\t}\n\tpublic unbind() {\n\t\t// console.log(\"itemsearch unbind\");\n\t}\n\n\n}\n","* {\n  -webkit-box-sizing: border-box;\n     -moz-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\n/* body { font-family: sans-serif; } */\n\n.setsearch {\n  width: 80%;\n  /* max-width: 1350px; */\n  margin: 0 auto;\n}\n\n\n.setsearch-title {\n  /* margin-left: 10%; */\n}\n\n/* ---- grid ---- */\n.grid:after {\n  content: '';\n  display: block;\n  clear: both;\n}\n.grid-wrapper {\n  width: 100%;\n  height: 100%;\n  min-height: 1000px;\n}\n.grid {\n  margin: 0 auto;\n  /* min-width: 540;\n  min-height: 1000px; */\n}\n\n/* clearfix */\n /* .grid:after {\n  content: '';\n  display: block;\n  clear: both;\n} */\n\n/* ---- grid-item ---- */\n.grid-item {\n  float: left;\n  width: 260px;\n  /* min-height: 150px; */\n\n  /* padding: 5px; */\n  /* margin: 5px;  /* masonry does not respect left & right margins, so we need to use gutter : 10 instead */\n  margin-bottom: 10px; /* and to add a margin-bottom for vertical gutter (this is respected by masonry) */\n}\n","<template>\n  <require from=\"./setsheet\"></require>\n  <require from=\"./setfilter\"></require>\n  <require from=\"./setsearch.css\"></require>\n  <require from=\"../../components/mason.css\"></require>\n\n\n  <div class=\"setsearch\">\n\n    <!-- Filtres -->\n    <setfilter filter.bind=\"filter\"></setfilter>\n    <!-- <filter filter.bind=\"filter\"></filter> -->\n\n    <p></p>\n\n    <div class=\"grid-wrapper\">\n      <!-- items -->\n      <!-- show grid only if data is available -->\n      <div class=\"grid\" ref=\"grid\" onchange.call=\"onchange()\">\n        <!-- <div class=\"grid-sizer\"></div> -->\n        <!-- <div class=\"grid-item\" repeat.for=\"item of data\" data.bind=\"item\" style=\"background: pink;\"></div> -->\n        <setsheet class=\"grid-item\" repeat.for=\"set of mason.data\" data.bind=\"set\"></setsheet>\n      </div>\n    </div>\n\n\n  </div>\n\n</template>\n","import { bindable, inject } from 'aurelia-framework';\nimport { build } from '../build/build';\nimport { setsearch } from '../sets/setsearch';\nimport { Router } from 'aurelia-router';\nimport { db } from '../../db';\n\n@inject(Router)\nexport class setsheet {\n\n\t// @bindable property with <element property.bind=\"item\"></element>\n\t@bindable private data: any = {};\n\n\t// check if this item has conditions\n\t// private hasConditions: boolean = false;\n\n\tpublic router: Router;\n\n\tpublic hidden = \"hidden\";\n\n\n\t// Ctor\n\tconstructor(router: Router) {\n\t\tthis.router = router;\n\t\t// this.hasConditions = \"conditions\" in this.data;\n\t\t// console.log(\"itemsheet\");\n\t}\n\n\tpublic isntPseudo(effect) {\n\t\tlet name: string = effect.name;\n\t\treturn name.includes(\"(isntPseudo)\");\n\t}\n\n\t// equip the set\n\tpublic equip() {\n\t\tfor (let item of this.data.items) {\n\t\t\t// console.log(\"equip \" + item.name.fr);\n\t\t\tif (!build.inst) {\n\t\t\t\t// build.inst = new build(() => this.router);\n\t\t\t\twindow.setTimeout(() => build.setItem(item), 300);\n\t\t\t} else {\n\t\t\t\tbuild.setItem(item);\n\t\t\t}\n\t\t}\n\t\tthis.router.navigate(\"/build\");\n\t\t// console.log(\"after nav\");\n\t\t// window.setTimeout(() => build.setItem(this.data), 300);\n\t}\n\n\t// when binding is done\n\tattached() {\n\t\t// if (setsearch.inst) setsearch.inst.loadedCount++;\n\t\tif (setsearch.inst) setsearch.inst.onLoadedSheet();\n\t\tthis.hidden = \"\";\n\t}\n\n\tpublic getStatColor(stat) {\n\t\treturn db.getStatColor(stat);\n\t}\n\n\tpublic hoverSet() {\n\t\tconsole.log(\"hover set\");\n\t}\n\tpublic hoverItem() {\n\t\tconsole.log(\"hover item\");\n\t}\n\n}\n","setsheet {\n  --sheetaccent: var(--accent1);\n  --sheetaccenthover: var(--accent0);\n  /* background: #1d3030; */\n  /* background: var(--bg1); */\n  cursor: pointer;\n  /* border: 1px solid var(--sheetaccent); */\n  border: 1px solid transparent;\n  /* box-shadow: 5px 5px 5px black; */\n}\nsetsheet .statistics {\n  padding: 5px;\n}\nsetsheet .title {\n    padding: 5px;\n    /* background: var(--sheetaccent); */\n    color: var(--sheetaccent);\n    font-size: 1.1rem;\n}\n\n\nsetsheet:hover {\n  border: 1px solid var(--sheetaccenthover);\n}\nsetsheet:hover .title {\n  color: var(--sheetaccenthover);\n}\n\nsetsheet .items {\n  display: flex;\n}\nsetsheet .items .item {\n  width: 55px;\n  height: 55px;\n}\nsetsheet .items .item img {\n  width: 55px;\n  height: 55px;\n}\n\nsetsheet .items .item itemsheet  {\n  /* Position the tooltip */\n  position: absolute;\n  visibility: collapse;\n  margin-left: -1px;\n  // margin-top: -30px;\n  // display: inline-block;\n  width: 260px;\n  background-color: var(--bg0);\n  // color: #fff;\n  // text-align: center;\n  // border-radius: 6px;\n  // padding: 5px 0;\n  pointer-events: none;\n  border: 1px solid var(--accent0);\n  z-index: 2;\n}\nsetsheet .items .item:hover itemsheet,\nsetsheet:hover .items .item:hover itemsheet {\n  visibility: visible;\n  opacity: 99%;\n}\n\n\nsetsheet .totalStats {\n  /* Position the tooltip */\n  position: absolute;\n  visibility: collapse;\n  padding-left: 5px;\n  // display: none;\n  margin-left: -1px;\n  // margin-top: -30px;\n  // display: inline-block;\n  width: 260px;\n  background-color: var(--bg0);\n  // color: #fff;\n  // text-align: center;\n  // border-radius: 6px;\n  // padding: 5px 0;\n  border: 1px solid var(--accent0);\n  border-top: none;\n  z-index: 1;\n}\nsetsheet:hover .totalStats {\n  // display: block;\n  visibility: visible;\n  opacity: 99%;\n}\n\nsetsheet .setsheet>.statistics {\n}\n//  setsheet:hover .setsheet > .statistics {\n//    display: none;\n// }\n","<template>\n  <require from=\"../build/components/itemSlot\"></require>\n  <require from=\"../items/itemsheet\"></require>\n  <require from=\"./setsheet.less\"></require>\n  <!-- <require from=\"/src/pages/items/itemsheet.css\"></require> -->\n\n\n  <!-- englobing class div for css -->\n  <div class=\"setsheet\" onclick.call=\"equip()\" onmouseover.call=\"hoverSet()\" ${hidden}>\n    <!-- <img class=\"bgimg\" src=\"${getImgUrl()}\"> -->\n    <!-- <div class=\"bgimg\" style=\"background-image: url('${getImgUrl()}');\"></div> -->\n\n    <!-- style=\"background-image: '${data.imgUrl}';\" -->\n    <!-- put the image as background ? -->\n    <!-- Image and weapon stats -->\n    <div class=\"title d-flex flex-nowrap\">\n      <!-- Name and level -->\n      <div>\n        <span>${data.name.fr}</span><br>\n      </div>\n      <!-- ${data.description} -->\n    </div>\n\n    <!-- items -->\n    <div class=\"items\">\n      <!-- <item-slot repeat.for=\"item of data.items\" style=\"margin-bottom: 2px;\" id=\"${data[i+10]}\" item.bind=\"item\"></item-slot> -->\n      <div class=\"item\" repeat.for=\"item of data.items\" onmouseover.call=\"hoverItem()\">\n        <img src=\"/src/res/items0/${item.imgUrl}\">\n        <itemsheet data.bind=\"item\"></itemsheet>\n      </div>\n      <!-- <div repeat.for=\"item of data.items\">\n        <img src=\"/src/res/items0/${item.imgUrl}\">\n      </div> -->\n    </div>\n\n    <!-- Effects -->\n    <div class=\"statistics\">\n      <ul style=\"padding: 0;\">\n        <!-- 1 row for each effect -->\n        <li class=\"row\" repeat.for=\"effect of data.bonuses[0]\" if=\"isntPseudo(effect)\">\n          <!-- <compose view-model=\"./statistic\" model.bind=\"effect\"></compose> -->\n          <div class=\"container statistic\">\n            ${effect.min}\n            ${effect.min == null ? \"\" : \"à\"}\n            ${effect.max}\n            <span style.bind=\"getStatColor(effect.name)\">${effect.name}</span>\n            <!-- ${effect} -->\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <!-- Effects totals -->\n    <div class=\"totalStats\">\n      <ul style=\"padding: 0;\">\n        <!-- 1 row for each effect -->\n        <li class=\"row\" repeat.for=\"effect of data.statistics\" if=\"isntPseudo(effect)\">\n          <!-- <compose view-model=\"./statistic\" model.bind=\"effect\"></compose> -->\n          <div class=\"container statistic\">\n            ${effect.min}\n            ${effect.min == null ? \"\" : \"à\"}\n            ${effect.max}\n            <span style.bind=\"getStatColor(effect.name)\">${effect.name}</span>\n            <!-- ${effect} -->\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <!-- Conditions -->\n    <!-- <div class=\"conditions\" if.bind=\"data.conditions\" style=\"border-top: 1px dashed var(--accent1);\">\n      <ul style=\"list-style: none; margin: 0px; padding: 0px;\">\n        <li repeat.for=\"cond of data.conditions\">\n          ${cond}\n        </li>\n      </ul>\n    </div> -->\n\n  </div>\n\n</template>\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","import * as Masonry from 'masonry-layout'\n\nexport class Mason {\n\tpublic obj: any;\n\n\t// full data\n\tpublic fulldata: any[] = [];\n\tpublic index: number = 0;\n\n\t// chosen data\n\tpublic data: any[] = [];\n\tpublic msnry: Masonry;\n\n\tpublic constructor() {\n\t\tconsole.log(\"mason ctor\");\n\t}\n\n\tpublic showMore(count?) {\n\t\tvar numPerPage = 50;\n\t\tif (count) numPerPage = count;\n\t\t// this.data.concat(response.content); //JSON.stringify(response.content);\n\t\t// console.log(\"itemsearch fulldata : \" + this.fulldata);\n\t\tfor (var j = 0; j < numPerPage; j++) {\n\t\t\tif (this.index >= this.fulldata.length) return;\n\t\t\t// console.log(\"itemsearch fulldata[\" + this.index + \"] : \" + this.fulldata[this.index]);\n\t\t\tthis.data.push(this.fulldata[this.index]);\n\t\t\tthis.index++;\n\t\t}\n\t\t// this.initMasonry();\n\t\t// this.msnry.reloadItems();\n\t\t// this.reloadMsnry();  // cant reload here because it takes time before the item sheets are actually added to the HTML\n\t\t// this.layout();\n\t}\n\n\t// event\n\tpublic loadedCountChanged() {\n\t\tthis.reloadMsnry();\n\t}\n\n\tpublic reloadMsnry() {\n\t\t// console.log(\"mason reloadMsnry\");\n\t\tif (this.msnry) {\n\t\t\tthis.msnry.reloadItems();\n\t\t\tthis.msnry.layout();\n\t\t}\n\t}\n\tpublic layout() {\n\t\t// console.log(\"mason layout()\");\n\t\tif (this.msnry) {\n\t\t\tthis.msnry.layout();\n\t\t}\n\t}\n\n\tpublic initMasonry() {\n\t\tconsole.log(\"mason init\");\n\t\tif (!this.obj.grid) return;\n\t\tif (this.msnry) this.msnry.destroy();\n\t\tif (!this.obj.attachedb || !this.obj.queriedb) return;\n\t\t// if (this.msnry != null) {\n\t\t// \tif (this.msnry.getItemElements().length != 0) return;\n\t\t// }\n\n\t\tvar ref = this;\n\t\t// if (this.obj.grid) console.log(\"mason count : \" + this.obj.grid.children.length);\n\t\t// else console.log(\"mason val : \" + this.obj.grid);\n\n\t\tthis.msnry = new Masonry(this.obj.grid, {\n\t\t\titemSelector: '.grid-item',\n\t\t\t// horizontalOrder: true,\n\t\t\tcolumnWidth: '.grid-item', // 270, // 250 + 5*2 + 5*2\n\t\t\tgutter: 10,\n\t\t\t// transitionDuration: 0,\n\t\t\tfitWidth: true,\n\t\t\t// initLayout: true,\n\t\t});\n\t\tfunction onLayout(items) {\n\t\t\tvar gridlength = ref.obj.grid ? ref.obj.grid.children.length : 0;\n\t\t\tvar datalength = ref.data ? ref.data.length : 0;\n\t\t\t// console.log(\" mason layout : \" + items.length + \" / \" + gridlength + \" / \" + datalength);\n\t\t\t// console.log(\" mason element : \" + items.keys());\n\t\t\t// console.log(\" mason element : \" + JSON.stringify(items[0]));\n\t\t\t// for (var i = 0; i < this.msnry.getItemElements().length; i++) {\n\t\t\t// \tconsole.log(\"mason element : \" + this.msnry.getItemElements()[i]);\n\t\t\t// }\n\t\t}\n\t\tfunction onLayoutOnce(items) {\n\t\t\t// console.log(\"itemsearch mason layout once : \" + items.length);\n\t\t}\n\t\t// bind event listener\n\t\tthis.msnry.on('layoutComplete', onLayout);\n\t\tthis.msnry.once('onLayoutOnce', onLayout);\n\t\tthis.msnry.layout();\n\t\t// if (this.grid) console.log(\"itemsearch mason 2 : \" + this.grid.children.length);\n\t\t// else console.log(\"itemsearch mason 2 : \" + this.grid);\n\t}\n\n}\n\n\n\nexport class util {\n\n\tpublic static caseAndAccentInsensitive(text) {\n\t\tconst accentMap = (function(letters) {\n\t\t\tlet map = {};\n\t\t\twhile (letters.length > 0) {\n\t\t\t\tlet letter = \"[\" + letters.shift() + \"]\",\n\t\t\t\t\tchars = letter.split('');\n\t\t\t\twhile (chars.length > 0) {\n\t\t\t\t\tmap[chars.shift()] = letter;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn map;\n\t\t})([\n\t\t\t'aàáâãäå', // a\n\t\t\t'cç',      // c\n\t\t\t'eèéêë',   // e\n\t\t\t'iìíîï',   // i\n\t\t\t'nñ',      // n\n\t\t\t'oòóôõöø', // o\n\t\t\t'sß',      // s\n\t\t\t'uùúûü',   // u\n\t\t\t'yÿ'       // y\n\t\t]);\n\t\tlet f = function(text) {\n\t\t\tvar textFold = '';\n\t\t\tif (!text)\n\t\t\t\treturn textFold;\n\t\t\ttext = text.toLowerCase();\n\t\t\tfor (var idx = 0; idx < text.length; idx++) {\n\t\t\t\tlet charAt = text.charAt(idx);\n\t\t\t\ttextFold += accentMap[charAt] || charAt;\n\t\t\t}\n\t\t\treturn \"(?i)\" + textFold;\n\t\t}\n\t\treturn f(text);\n\t}\n\n\t// Returns a function, that, as long as it continues to be invoked, will not\n\t// be triggered. The function will be called after it stops being called for\n\t// N milliseconds.\n\tpublic static debounce(func, wait, immediate) {\n\t\t// 'private' variable for instance\n\t\t// The returned function will be able to reference this due to closure.\n\t\t// Each call to the returned function will share this common timer.\n\t\tvar timeout;\n\n\t\t// Calling debounce returns a new anonymous function\n\t\treturn function() {\n\t\t\t// reference the context and args for the setTimeout function\n\t\t\tvar context = this,\n\t\t\t\targs = arguments;\n\n\t\t\t// Should the function be called now? If immediate is true\n\t\t\t//   and not already in a timeout then the answer is: Yes\n\t\t\tvar callNow = immediate && !timeout;\n\n\t\t\t// This is the basic debounce behaviour where you can call this\n\t\t\t//   function several times, but it will only execute once\n\t\t\t//   [before or after imposing a delay].\n\t\t\t//   Each time the returned function is called, the timer starts over.\n\t\t\tclearTimeout(timeout);\n\n\t\t\t// Set the new timeout\n\t\t\ttimeout = setTimeout(function() {\n\n\t\t\t\t// Inside the timeout function, clear the timeout variable\n\t\t\t\t// which will let the next execution run when in 'immediate' mode\n\t\t\t\ttimeout = null;\n\n\t\t\t\t// Check if the function already ran with the immediate flag\n\t\t\t\tif (!immediate) {\n\t\t\t\t\t// Call the original function with apply\n\t\t\t\t\t// apply lets you define the 'this' object as well as the arguments\n\t\t\t\t\t//    (both captured before setTimeout)\n\t\t\t\t\tfunc.apply(context, args);\n\t\t\t\t}\n\t\t\t}, wait);\n\n\t\t\t// Immediate mode and no wait timer? Execute the function..\n\t\t\tif (callNow) func.apply(context, args);\n\t\t}\n\t}\n\n\n}\n"]}